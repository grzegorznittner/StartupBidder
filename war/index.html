<!DOCTYPE HTML>
<html>
        
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="description" content="Startupbidder - list, bid, comment and vote on startup businesses worldwide"/>
    <meta name="keywords" content="startupbidder startup company auction bid business plan"/>
    <title>Startupbidder - list, bid, comment, vote on startups</title>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<!--	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.8/jquery-ui.min.js"></script> -->
    <link rel="canonical" href="http://startupbidder.appspot.com"/>

<!-- google analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23942052-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<!-- javascript code -->
<script type="text/javascript">
// http://jquery-howto.blogspot.com/2009/09/get-url-parameters-values-with-jquery.html
$.extend({
  getUrlVars: function(){
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
    }
    return vars;
  },
  getUrlVar: function(name){
    return $.getUrlVars()[name];
  }
});

/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

/**
 * Create a cookie with the given name and value and other optional parameters.
 *
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Set the value of a cookie.
 * @example $.cookie('the_cookie', 'the_value', { expires: 7, path: '/', domain: 'jquery.com', secure: true });
 * @desc Create a cookie with all available options.
 * @example $.cookie('the_cookie', 'the_value');
 * @desc Create a session cookie.
 * @example $.cookie('the_cookie', null);
 * @desc Delete a cookie by passing null as value. Keep in mind that you have to use the same path and domain
 *       used when the cookie was set.
 *
 * @param String name The name of the cookie.
 * @param String value The value of the cookie.
 * @param Object options An object literal containing key/value pairs to provide optional cookie attributes.
 * @option Number|Date expires Either an integer specifying the expiration date from now on in days or a Date object.
 *                             If a negative value is specified (e.g. a date in the past), the cookie will be deleted.
 *                             If set to null or omitted, the cookie will be a session cookie and will not be retained
 *                             when the the browser exits.
 * @option String path The value of the path atribute of the cookie (default: path of page that created the cookie).
 * @option String domain The value of the domain attribute of the cookie (default: domain of page that created the cookie).
 * @option Boolean secure If true, the secure attribute of the cookie will be set and the cookie transmission will
 *                        require a secure protocol (like HTTPS).
 * @type undefined
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */

/**
 * Create multiple cookies at once stored in an object, with optional parameters affecting them all.
 *
 * @example $.cookie({ 'the_cookie' : 'the_value' });
 * @desc Set/delete multiple cookies at once.
 * @example $.cookie({ 'the_cookie' : 'the_value' }, { expires: 7, path: '/', domain: 'jquery.com', secure: true });
 * @desc Set/delete multiple cookies with options.
 *
 * @param Object name An object with multiple cookie name-value pairs.
 * @param Object options An object literal containing key/value pairs to provide optional cookie attributes.
 * @option Number|Date expires Either an integer specifying the expiration date from now on in days or a Date object.
 *                             If a negative value is specified (e.g. a date in the past), the cookie will be deleted.
 *                             If set to null or omitted, the cookie will be a session cookie and will not be retained
 *                             when the the browser exits.
 * @option String path The value of the path atribute of the cookie (default: path of page that created the cookie).
 * @option String domain The value of the domain attribute of the cookie (default: domain of page that created the cookie).
 * @option Boolean secure If true, the secure attribute of the cookie will be set and the cookie transmission will
 *                        require a secure protocol (like HTTPS).
 * @type undefined
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */

/**
 * Get the value of a cookie with the given name.
 *
 * @example $.cookie('the_cookie');
 * @desc Get the value of a cookie.
 *
 * @param String name The name of the cookie.
 * @return The value of the cookie.
 * @type String
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */

/**
 * Get the names and values of all cookies for the page.
 *
 * @example $.cookie();
 * @desc Get all the cookies for the page
 *
 * @return an object with the name-value pairs of all available cookies.
 * @type Object
 *
 * @name $.cookie
 * @cat Plugins/Cookie
 * @author Klaus Hartl/klaus.hartl@stilbuero.de
 */


jQuery.cookie = function(name, value, options) {
    if (typeof value != 'undefined'  ||  (name  &&  typeof name != 'string')) { // name and value given, set cookie
        if (typeof name == 'string') {
            options = options || {};
            if (value === null) {
                value = '';
                options.expires = -1;
            }
            var expires = '';
            if (options.expires && (typeof options.expires == 'number' || options.expires.toUTCString)) {
                var date;
                if (typeof options.expires == 'number') {
                    date = new Date();
                    date.setTime(date.getTime() + (options.expires * 24 * 60 * 60 * 1000));
                } else {
                    date = options.expires;
                }
                expires = '; expires=' + date.toUTCString(); // use expires attribute, max-age is not supported by IE
            }
            // CAUTION: Needed to parenthesize options.path and options.domain
            // in the following expressions, otherwise they evaluate to undefined
            // in the packed version for some reason...
            var path = options.path ? '; path=' + (options.path) : '';
            var domain = options.domain ? '; domain=' + (options.domain) : '';
            var secure = options.secure ? '; secure' : '';
            document.cookie = name + '=' + encodeURIComponent(value) + expires + path + domain + secure;
        } else { // `name` is really an object of multiple cookies to be set.
          for (var n in name) { jQuery.cookie(n, name[n], value||options); }
        }
    } else { // get cookie (or all cookies if name is not provided)
        var returnValue = {};
        if (document.cookie) {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (!name) {
                    var nameLength = cookie.indexOf('=');
                    returnValue[ cookie.substr(0, nameLength)] = decodeURIComponent(cookie.substr(nameLength+1));
                } else if (cookie.substr(0, name.length + 1) == (name + '=')) {
                    returnValue = decodeURIComponent(cookie.substr(name.length + 1));
                    break;
                }
            }
        }
        return returnValue;
    }
};


/**
* jQuery.UI.iPad plugin
* Copyright (c) 2010 Stephen von Takach
* licensed under MIT.
* Date: 27/8/2010
*
* http://code.google.com/p/jquery-ui-for-ipad-and-iphone/
*/


$(function() {
	//
	// Extend jQuery feature detection
	//
	$.extend($.support, {
		touch: typeof Touch == "object"
	});
	
	//
	// Hook up touch events
	//
	$.fn.addTouch = function()
	{
		if ($.support.touch) {
			this.each(function(i,el){
				el.addEventListener("touchstart", iPadTouchHandler, false);
				el.addEventListener("touchmove", iPadTouchHandler, false);
				el.addEventListener("touchend", iPadTouchHandler, false);
				el.addEventListener("touchcancel", iPadTouchHandler, false);
			});
		}

		return this;
	}
});


var lastTap = null;			// Holds last tapped element (so we can compare for double tap)
var tapValid = false;			// Are we still in the .6 second window where a double tap can occur
var tapTimeout = null;			// The timeout reference

function cancelTap() {
	tapValid = false;
}


var rightClickPending = false;	// Is a right click still feasible
var rightClickEvent = null;		// the original event
var holdTimeout = null;			// timeout reference
var cancelMouseUp = false;		// prevents a click from occuring as we want the context menu


function cancelHold() {
	if (rightClickPending) {
		window.clearTimeout(holdTimeout);
		rightClickPending = false;
		rightClickEvent = null;
	}
}

function startHold(event) {
	if (rightClickPending)
		return;

	rightClickPending = true; // We could be performing a right click
	rightClickEvent = (event.changedTouches)[0];
	holdTimeout = window.setTimeout("doRightClick();", 800);
}


function doRightClick() {
	rightClickPending = false;

	//
	// We need to mouse up (as we were down)
	//
	var first = rightClickEvent,
		simulatedEvent = document.createEvent("MouseEvent");
	simulatedEvent.initMouseEvent("mouseup", true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY,
			false, false, false, false, 0, null);
	first.target.dispatchEvent(simulatedEvent);

	//
	// emulate a right click
	//
	simulatedEvent = document.createEvent("MouseEvent");
	simulatedEvent.initMouseEvent("mousedown", true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY,
			false, false, false, false, 2, null);
	first.target.dispatchEvent(simulatedEvent);

	//
	// Show a context menu
	//
	simulatedEvent = document.createEvent("MouseEvent");
	simulatedEvent.initMouseEvent("contextmenu", true, true, window, 1, first.screenX + 50, first.screenY + 5, first.clientX + 50, first.clientY + 5,
                                  false, false, false, false, 2, null);
	first.target.dispatchEvent(simulatedEvent);


	//
	// Note:: I don't mouse up the right click here however feel free to add if required
	//


	cancelMouseUp = true;
	rightClickEvent = null; // Release memory
}


//
// mouse over event then mouse down
//
function iPadTouchStart(event) {
	var touches = event.changedTouches,
		first = touches[0],
		type = "mouseover",
		simulatedEvent = document.createEvent("MouseEvent");
	//
	// Mouse over first - I have live events attached on mouse over
	//
	simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY,
                            false, false, false, false, 0, null);
	first.target.dispatchEvent(simulatedEvent);

	type = "mousedown";
	simulatedEvent = document.createEvent("MouseEvent");

	simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY,
                            false, false, false, false, 0, null);
	first.target.dispatchEvent(simulatedEvent);


	if (!tapValid) {
		lastTap = first.target;
		tapValid = true;
		tapTimeout = window.setTimeout("cancelTap();", 600);
		startHold(event);
	}
	else {
		window.clearTimeout(tapTimeout);

		//
		// If a double tap is still a possibility and the elements are the same
		//	Then perform a double click
		//
		if (first.target == lastTap) {
			lastTap = null;
			tapValid = false;

			type = "click";
			simulatedEvent = document.createEvent("MouseEvent");

			simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY,
                         	false, false, false, false, 0/*left*/, null);
			first.target.dispatchEvent(simulatedEvent);

			type = "dblclick";
			simulatedEvent = document.createEvent("MouseEvent");

			simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY,
                         	false, false, false, false, 0/*left*/, null);
			first.target.dispatchEvent(simulatedEvent);
		}
		else {
			lastTap = first.target;
			tapValid = true;
			tapTimeout = window.setTimeout("cancelTap();", 600);
			startHold(event);
		}
	}
}

function iPadTouchHandler(event) {
	var type = "",
		button = 0; /*left*/

    if (event.touches.length > 1)
		return;

	switch (event.type) {
		case "touchstart":
			if ($(event.changedTouches[0].target).is("select")) {
				return;
			}
			iPadTouchStart(event); /*We need to trigger two events here to support one touch drag and drop*/
			event.preventDefault();
			return false;
			break;

		case "touchmove":
			cancelHold();
			type = "mousemove";
			event.preventDefault();
			break;

		case "touchend":
			if (cancelMouseUp) {
				cancelMouseUp = false;
				event.preventDefault();
				return false;
			}
			cancelHold();
			type = "mouseup";
			break;

		default:
			return;
	}

	var touches = event.changedTouches,
		first = touches[0],
		simulatedEvent = document.createEvent("MouseEvent");

	simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY,
                            false, false, false, false, button, null);

	first.target.dispatchEvent(simulatedEvent);

	if (type == "mouseup" && tapValid && first.target == lastTap) {	// This actually emulates the ipads default behaviour (which we prevented)
		simulatedEvent = document.createEvent("MouseEvent");		// This check avoids click being emulated on a double tap

		simulatedEvent.initMouseEvent("click", true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY,
                            false, false, false, false, button, null);

		first.target.dispatchEvent(simulatedEvent);
	}
}

/* startupbidder javascript code */

$(function(){
	var $ = jQuery;

    $('body').addTouch(); // enable for touch devices

    var Util = function() {
        var self = {};
        self.controller = null;
        self.keyCache = {};
        self.setup = function(controller) {
            self.controller = controller;
        };
        self.constructNumericDate = function(year, month, day) {
            var date = '' + year + (month < 10 ? '0' : '') + month + (day < 10 ? '0' : '') + day;
            return date;
        };
        self.numericFromDateObj = function(date) {
            if (date)
                return self.constructNumericDate(date.getFullYear(), date.getUTCMonth(), date.getUTCDate());
        };
        self.epochToNumericDate = function(epoch) {
            var date;
            if (epoch) {
                date = new Date(epoch);
                return self.controller.util.numericFromDateObj(date);
            }
        };
        self.today = function() {
            if (!self.todayCache) {
                var today = new Date();
                var numericDate = self.constructNumericDate(today.getFullYear(), today.getMonth()+1, today.getDate());
                self.todayCache = numericDate;
            }
            return self.todayCache;
        };
        self.randomElement = function(array) {
            return array[Math.floor(Math.random()*array.length)];
        };
        self.randomKey = function(name, assocArray) {
            if (!self.keyCache[name]) { // caching
                self.keyCache[name] = [];
                for (var key in assocArray) {
                    self.keyCache[name].push(key);
                }
            }
            return self.randomElement(self.keyCache[name]);
        }
        self.ucFirst = function(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        };
        self.formatDate = function(yyyymmdd) {
            var year  = yyyymmdd.substr(0,4);
            var month = yyyymmdd.substr(4,2);
            var day   = yyyymmdd.substr(6,2);
            return year + '-' + month + '-' + day;
        };
        self.addCommas = function(num) {
            var nStr = num + '';
            var x = nStr.split('.');
            var x1 = x[0];
            var x2 = x.length > 1 ? '.' + x[1] : '';
            var rgx = /(\d+)(\d{3})/;
            while (rgx.test(x1)) {
              x1 = x1.replace(rgx, '$1' + ',' + '$2');
            }
            return x1 + x2;
        };
        self.generateGuid = function() { // rfc4122 compliant
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
                return v.toString(16);
            });
        };
        return self;
    };

    var Datastore = function() {
        var self = {};
        self.db = {};
        self.controller = null;
        self.setup = function(controller) {
            self.controller = controller;
            self.genRandomDb();
        }
        self.firstNameComponents = [
            'Bob', 
            'Mark',
            'Prateep',
            'Ming',
            'Grzegorz',
            'Matteo',
            'Cindy',
            'Mariella',
            'Batuku',
            'Hitomi',
            'Brad',
            'John',
            'Hans',
            'Ingo',
            'Pierre',
            'Xiaoping',
            'Jay',
            'Malhaz',
            'Mohammed',
            'Sergio',
            'Paulo',
            'Alberto',
            'Joao',
            'Klaus',
            'Vladimir',
            'Rajiv',
            'Joe',
            'Massimo',
            'Antonio',
            'Maribel'
        ];
        self.lastNameComponents = [
            'Peters',
            'Livingston',
            'Ramasubramanian',
            'Hu',
            'Nittner',
            'Pavesi',
            'Lu',
            'Ianieri',
            'Kakimbwe',
            'Yokoshima',
            'Etienne',
            'Rogdriguez',
            'Steinmann',
            'Obermeyer',
            'Cohen',
            'Solomon',
            'Malonkov',
            'Korzinsky',
            'Wang',
            'Powers',
            'Kuroda',
            'Patel',
            'Burns',
            'Edwards',
            'Bettiol',
            'Valanju',
            'Signore',
            'Scott'
        ];
        self.startupNameComponents = [
            'book',
            'trendz',
            'square',
            'shout',
            'oogle',
            'bidder',
            'cloud',
            'pix',
            'on',
            'motion',
            'fusion',
            'fluid',
            'box',
            'kick',
            'pop',
            'space',
            'net',
            'group',
            'bo',
            'face',
            'you',
            'tube',
            'mee',
            'my',
            'space',
            'it',
            'sana',
            'sumu',
            'net',
            'connect',
            'drop',
            'media',
            'common',
            'floor',
            'diff',
            'lane',
            'flip',
            'bhi',
            'snap',
            'mind',
            'quilt',
            'fi',
            'soc',
            'wala',
            'beam',
            'info',
            'ink',
            'tol',
            'nap',
            'circle',
            'us',
            'shop',
            'fund',
            'goto',
            'aba',
            'social',
            'dala',
            'crowd',
            'sprout',
            'edge',
            'bay',
            'hop',
            'stop',
            'era',
            'azza',
            'ity',
            'ad',
            'studio',
            'r',
            'kas',
            'ardia',
            'z',
            'kubu',
            'stream',
            'matcher',
            'm',
            'bit',
            'prima',
            'met',
            'play',
            'ster',
            'vitosha',
            'nect',
            'vision',
            'soft',
            'a',
            'e',
            'u',
            'i',
            'o',
            'y'
        ];
        self.startupVerbs = [
            'make',
            'create',
            'lead',
            'find',
            'build',
            'enhance',
            'join',
            'evolve',
            'intertwine',
            'optimize',
            'enable',
            'disrupt',
            'unify',
            'promote',
            'improve',
            'market',
            'crowdsource'
        ];
        self.startupNouns = [
            'networks',
            'businesses',
            'enterprises',
            'groups',
            'connections',
            'solutions',
            'communications',
            'meetings',
            'applications',
            'statistics',
            'methods',
            'revolutions',
            'advancements',
            'technologies',
            'financials',
            'exchanges',
            'processes',
            'systems',
            'infrastructures',
            'leadership methods',
            'economics',
            'patterns',
            'sources',
            'links',
            'software applications',
            'smartphones',
            'marketing strategies',
            'measurements',
            'kiosks',
            'decisions',
            'industries',
            'markets',
            'games',
            'apps',
            'media',
            'methodologies',
            'conferences',
            'collaborations',
            'presentations',
            'accounting methods',
            'approaches to finance',
            'funds',
            'venture funds',
            'angels',
            'seed funds',
            'commodities',
            'currencies',
            'bandwidth measures',
            'messaging systems',
            'telecommuniciations',
            'transports',
            'synergies',
            'retail stores',
            'warehouses',
            'data',
            'entertainment companies',
            'insurance companies',
            'government organizations',
            'organizations',
            'mindshares',
            'memes',
            'process controls',
            'branding strategies',
            'best practices',
            'rightsizing practicies',
            'downsizing inevitabilities',
            'offshoring methods',
            'outsourcing justifications',
            'resources',
            'databases',
            'planning activities',
            'deals',
            'business cases',
            'bidding processes',
            'artificial intelligence applications',
            'decision trees',
            'decisions'
        ];
        self.startupAdjectives = [
            'social',
            'end-to-end',
            'up-voted',
            'science-fiction-like',
            'high-performance',
            'next-generation',
            'revolutionary',
            'cutting edge',
            'efficient',
            'evolved',
            'web-scale',
            'backend',
            'customer-facing',
            'client',
            'visionary',
            'performance-enhancing',
            'cloud-enabled',
            'patented',
            'proven',
            'location-aware',
            'mobile',
            'tablet',
            'healthcare',
            'automated',
            'market',
            'prepackaged',
            'low-impact',
            'carbon-neutral',
            'progressive',
            'positive',
            'enhanced',
            'optimized',
            'engineered',
            'best-of-breed',
            'improved',
            'best-class',
            'world-class',
            'second-to-none',
            'online',
            'peer-to-peer',
            'networked',
            'connected',
            'passive',
            'monitored',
            'scalable',
            'unmatched',
            'secure',
            'securitized',
            'synchronized',
            'interactive',
            'engaging',
            'addictive',
            'massive',
            'virtualized',
            'startup',
            'entrepreneurial',
            'second-to-none',
            'high-speed',
            'agile',
            'consumer-friendly',
            'friendly',
            'market-tested',
            'award-winning',
            'enlightened',
            'self-aware',
            'intelligent',
            'scientifically-proven',
            'global',
            'strategic',
            'worldwide',
            'cross-cultural',
            'practical',
            'filtered',
            'structured',
            'interconnected',
            'disruptive'
        ];
        self.startupPrepositions = [
            'in',
            'on',
            'through',
            'with',
            'by',
            'together with',
            'for',
            'from'
        ];
        self.profileTitles = [
            'CEO',
            'President',
            'Freelancer',
            'Managing Director',
            'Board Member',
            'Chairman',
            'Executive Director',
            'Programmer',
            'Founder',
            'Co-Founder',
            'CTO',
            'VP Sales',
            'EVP',
            'Manager',
            'Member',
            'Managing Member',
            'CMO'
        ];
        self.emailDomains = [
            'yahoo.com',
            'yahoo.co.jp',
            'google.com',
            'google.de',
            'google.co.uk',
            'hotmail.com',
            'facebook.com',
            'aol.com'
        ];
        self.genRandomNounPhrase = function() {
            var np = self.startupNouns[Math.floor(Math.random()*self.startupNouns.length)];
            np = self.startupAdjectives[Math.floor(Math.random()*self.startupAdjectives.length)] + ' ' + np;
            if (Math.floor(Math.random()*2)) {
                np = self.startupAdjectives[Math.floor(Math.random()*self.startupAdjectives.length)] + ' ' + np;
            }
            return np;
        };
        self.genRandomPrepPhrase = function() {
            return self.startupPrepositions[Math.floor(Math.random()*self.startupPrepositions.length)] + ' ' + self.genRandomNounPhrase();
        };
        self.genRandomVerbPhrase = function() {
            var verb = self.startupVerbs[Math.floor(Math.random()*self.startupVerbs.length)];
            if (verb[verb.length - 1] == 'e') {
               verb = verb.substr(0, verb.length - 1);
            }
            var gerund = verb + 'ing';
            return gerund;
        };
        self.genRandomStartupDesc = function() {
            var desc = '';
            if (Math.floor(Math.random()*2)) {
                desc += self.genRandomVerbPhrase() + ' ';
            }
            desc += self.genRandomNounPhrase();
            if (Math.floor(Math.random()*2)) {
                desc += ' ' + self.genRandomPrepPhrase();
            }
            if (Math.floor(Math.random()*2)) {
                desc += ' ' + self.genRandomPrepPhrase();
            }
            return desc;
        };
        self.genRandomStartupName = function() {
            var i = Math.floor(Math.random() * self.startupNameComponents.length);
            var j = i;
            while (i==j) { // avoid repeats
                j = Math.floor(Math.random() * self.startupNameComponents.length);
            }
            var name = self.startupNameComponents[i] + self.startupNameComponents[j];
            return name;
        };
        self.genRandomFirstName = function() {
            var firstIdx = Math.floor(Math.random() * self.firstNameComponents.length);
            var first = self.firstNameComponents[firstIdx];
            return first;
        };
        self.genRandomLastName = function() {
            var lastIdx = Math.floor(Math.random() * self.lastNameComponents.length);
            var last = self.lastNameComponents[lastIdx];
            return last;
        };
        self.genRandomUsername = function(firstName, lastName) {
            var first = firstName ? firstName : self.genRandomFirstName();
            var last = lastName ? lastName : self.genRandomLastName();
            var idSuffix = Math.floor(Math.random() * 100);
            return first + last + idSuffix;
        };
        self.selectRandomProfileId = function(except_this_profile_id, onlyInvestors) {
            var profile_id = self.controller.util.randomKey('profile_ids', self.db.profiles);
            var profile = self.db.profiles[profile_id];
            if (profile_id != except_this_profile_id && (!onlyInvestors || profile.investor)) {
                return profile_id;
            }
            else {
                return self.selectRandomProfileId(except_this_profile_id, onlyInvestors);
            }
        };
        self.genRandomListing = function() {
            var listing = {};
            listing.listing_id = self.controller.util.generateGuid();
            listing.title = self.genRandomStartupName() + ': ' + self.genRandomStartupDesc();
            listing.median_valuation = 0; // we'll add later
            listing.num_votes = Math.floor(Math.random()*100);
            listing.num_bids = 0; // we'll add later
            listing.num_comments = 0; // we'll add later
            listing.profile_id = self.selectRandomProfileId();
            self.db.profiles[listing.profile_id].num_listings++;
            listing.profile_username = self.db.profiles[listing.profile_id].username;
            listing.listing_date =  self.genRandomDate(20110101, self.controller.util.today());
            listing.closing_date = self.genRandomDate(listing.listing_date);
            listing.status = (listing.closing_date < self.controller.util.today() ? (Math.floor(Math.random()*5) == 0 ? 'withdrawn' : 'closed') : 'active');
            if (listing.status == 'withdrawn') {
                listing.closing_date = self.genRandomDate(listing.listing_date, self.controller.util.today());
            }
            listing.suggested_amt = Math.floor(Math.random()*100) * 1000;
            listing.suggested_pct = Math.floor(Math.random()*50);
            listing.suggested_val = self.controller.bids.calculateValuation(listing.suggested_amt, listing.suggested_pct, true);
            listing.summary = 'Foo is the bar of the baz market.';
            listing.business_plan_url = 'http://news.ycombinator.com';
            listing.presentation_url = 'http://www.reddit.com';
            return listing;
        };
        self.genRandomListings = function(num_listings) {
            var numListings = num_listings || 20;
            var listings = {};
            var listing;
            for (var i = 0; i < numListings; i++) {
                listing = self.genRandomListing();
                listings[listing.listing_id] = listing;
            }
            self.db.listings = listings;
        };
        self.orgWords = [
            'Investments',
            'Industries',
            'Capital',
            'Fund',
            'Ventures',
            'Partners',
            'Group',
            'Combinator',
            'Seed Fund',
            'Angels',
            'Advisors',
            'Venture',
            'Venture Partners',
            'Technologies',
            'Catalyst',
            'Capital Group',
            'Associates',
            'Equity Partners',
            'Fonds',
            'Kapital'
        ];
        self.orgTypes = [
            'LLC',
            'Inc.',
            'LP',
            'LLP',
            'GmbH',
            'Ltd',
            'Limited',
            'Ltd BVI',
            'SA',
            'SRL',
            'PLC',
            'AG',
            'NV',
            'Corp',
            'SPA',
            'AMBA',
            'Oy',
            'SARL',
            'BV',
            'LTD',
            'AS',
            'AB'
        ];
        self.genRandomOrganization = function(isInvestor) {
            var root = self.controller.util.ucFirst(self.genRandomStartupName());
            var suffix = isInvestor ? self.controller.util.randomElement(self.orgWords) : '';
            var type = self.controller.util.randomElement(self.orgTypes);
            return root + ' ' + suffix + (suffix?' ':'') + type;
        };
        self.genRandomProfile = function() {
            var profile = {};
            var first = self.genRandomFirstName();
            var last = self.genRandomLastName();
            profile.profile_id = self.controller.util.generateGuid();
            profile.username = self.genRandomUsername(first, last);
            profile.name = first + ' ' + last;
            profile.title = self.controller.util.randomElement(self.profileTitles);
            profile.investor = Math.floor(Math.random() * 2);
            profile.organization = self.genRandomOrganization(profile.investor);
            profile.email = profile.username + '@' + self.controller.util.randomElement(self.emailDomains);
            profile.open_id = profile.email;
            profile.facebook = self.genRandomUsername(first, last) + 'fb';
            profile.twitter = self.genRandomUsername(first, last) + 'tw';
            profile.linkedin = self.genRandomUsername(first, last) + 'li';
            profile.num_listings = 0; // add later
            profile.num_bids = 0; // add later
            profile.num_comments = 0; // add later
            profile.status = 'active'; // or 'deactivated'
            profile.joined_date =  self.genRandomDate(20110101, self.controller.util.today());
            return profile;
        };
        self.genArleyProfile = function() {
            var profile = self.genRandomProfile();
            profile.username = 'johnarleyburns';
            profile.name = 'John Arley Burns';
            profile.email = 'johnarleyburns@gmail.com';
            profile.openid = 'johnarleyburns@gmail.com';
            profile.facebook = 'johnarleyburns';
            profile.twitter = 'jarleyburns';
            profile.linkedin = '';
            profile.open_id = 'johnarleyburns@google.com';
            return profile;
        };
        self.genRandomProfiles = function(num_profiles) {
            var numProfiles = num_profiles || 20;
            var profiles = {};
            var profile;
            for (var i = 0; i < numProfiles; i++) {
                profile = i == 0 ? self.genArleyProfile() : self.genRandomProfile();
                if (i == numProfiles-1)
                    profile.investor = 1; // ensure always at least one investor
                profiles[profile.profile_id] = profile;
            }
            self.db.profiles = profiles;
        };
        self.genRandomVerb = function() {
            return self.startupVerbs[Math.floor(Math.random()*self.startupVerbs.length)];
        };
        self.genRandomCommentText = function() {
            var text = '';
            if (Math.floor(Math.random()*2)) {
                text = self.startupAdjectives[Math.floor(Math.random()*self.startupAdjectives.length)];
            }
            else {
                text = self.genRandomNounPhrase();
                if (Math.floor(Math.random()*2)) {
                    text += ' ' + self.genRandomVerb() + ' ' + self.genRandomNounPhrase();
                    if (Math.floor(Math.random()*2)) {
                        text += ' ' + self.genRandomPrepPhrase();
                    }
                }
            }
            var punctuation = ['', '.', '!', '?', '...'];
            text += punctuation[Math.floor(Math.random()*punctuation.length)];
            return text;
        };
        self.genRandomDate = function(earliestDate, latestDate) {
            var year = 2011;
            var month = Math.floor(Math.random()*12) + 1;
            var day = Math.floor(Math.random()*31) + 1;
            if (month in {4:1,6:1,9:1,11:1} && day > 30) {
                day = 30;
            }
            if (month == 2) {
                if (year % 4 == 0 && year % 100 != 0) { // leap year
                    if (day > 29) {
                        day = 29;
                    }
                }
                else {
                    if (day > 28) {
                        day = 28;
                    }
                }
            }
            var date = self.controller.util.constructNumericDate(year, month, day);
            if ((earliestDate && date < earliestDate) || (latestDate && date > latestDate)) {
                return self.genRandomDate(earliestDate, latestDate);
            }
            else {
                return date;
            }
        };
        self.genRandomCommentForListing = function(listing_id) {
            var comment = {};
            comment.comment_id = self.controller.util.generateGuid();
            comment.listing_id = listing_id;
            comment.listing_title = self.db.listings[listing_id].title;
            comment.text = self.genRandomCommentText();
            comment.comment_date = self.genRandomDate(self.db.listings[listing_id].listing_date, self.controller.util.today());
            comment.profile_id = self.selectRandomProfileId();
            self.db.profiles[comment.profile_id].num_comments++;
            comment.profile_username = self.db.profiles[comment.profile_id].username;
            comment.status = 'active';
            return comment;
        };
        self.addComment = function(listing_id, profile_id, comment_text){
            var comment = {};
            comment.comment_id = self.controller.util.generateGuid();
            comment.listing_id = listing_id;
            self.db.listings[listing_id].num_comments++;
            comment.listing_title = self.db.listings[listing_id].title;
            comment.text = comment_text;
            comment.comment_date = self.controller.util.today();
            comment.profile_id = profile_id;
            self.db.profiles[comment.profile_id].num_comments++;
            comment.profile_username = self.db.profiles[comment.profile_id].username;
            comment.status = 'active';
            self.db.comments[comment.comment_id] = comment;
            return comment;
        };
        self.addBid = function(listing_id, profile_id, bid_amt, bid_pct, bid_type, bid_rate){
            var bid = {};
            bid.bid_id = self.controller.util.generateGuid();
            bid.listing_id = listing_id;
            self.db.listings[listing_id].num_bids++;
            bid.listing_title = self.db.listings[listing_id].title;
            bid.bid_date = self.controller.util.today();
            bid.profile_id = profile_id;
            self.db.profiles[bid.profile_id].num_bids++;
            bid.profile_username = self.db.profiles[bid.profile_id].username;

            var raw_amt = bid_amt || '';
            raw_amt = raw_amt.replace(/[^\d]/g,'');
            bid.amount = raw_amt != '' ? raw_amt : 0;

            var raw_type = bid_type || '';
            bid.bid_type = raw_type in {common:1,preferred:1,note:1} ? raw_type : 'common';

            var raw_rate = bid_rate || '';
            raw_rate = raw_rate.replace(/[^\d]/g,'');
            bid.interest_rate = raw_rate != '' ? raw_rate : 0;

            var raw_pct = bid_pct || '';
            raw_pct = raw_pct.replace(/[^\d]/g,'');
            bid.equity_pct = raw_pct != '' ? raw_pct : 0;

            bid.valuation = self.controller.bids.calculateValuation(bid.amount, bid.equity_pct, true);

            bid.status = 'active';
            self.db.bids[bid.bid_id] = bid;
            return bid;
        };
        self.deleteComment = function(comment_id) {
            var comment = self.db.comments[comment_id];
            if (comment) {
                comment.status = 'deleted';
                self.db.listings[comment.listing_id].num_comments--;
                self.db.profiles[comment.profile_id].num_comments--;
            }
        };
        self.deleteBid = function(bid_id) {
            var bid = self.db.bids[bid_id];
            if (bid) {
                bid.status = 'deleted';
                self.db.listings[bid.listing_id].num_bids--;
                self.db.profiles[bid.profile_id].num_bids--;
            }
        };
        self.genRandomBidType = function() {
            var bid_type;
            var rnd = Math.floor(Math.random()*3);
            if (rnd == 0) {
                bid_type = 'common';
            }
            else if (rnd == 1) {
                bid_type = 'preferred';
            }
            else {
                bid_type = 'note';
            }
            return bid_type;
        };
        self.genRandomInterestRate = function(bid_type) {
            var maxInterestRateMinus5 = 15;
            return (bid_type in {preferred:1,note:1}) ? 5 + Math.floor(Math.random()*maxInterestRateMinus5) : 0;
        };
        self.genRandomEquityPct = function() {
            var maxEquityPctDiv5 = 20; // 100 / 5
            var equity_pct = Math.floor(5*Math.floor(Math.random()*maxEquityPctDiv5));
            if (equity_pct < 5)
                equity_pct = 5;
            return equity_pct;
        };
        self.genRandomAmount = function() {
            var maxBidAmountDiv25k = 39; // 25k + ($1m / 25k)
            return 25000 + Math.floor(25000*Math.floor(Math.random()*maxBidAmountDiv25k));
        };
        self.genRandomBidForListing = function(listing_id) {
            var bid = {};
            bid.bid_id = self.controller.util.generateGuid();
            bid.listing_id = listing_id;
            bid.listing_title = self.db.listings[listing_id].title;
            bid.bid_date = self.genRandomDate(self.db.listings[listing_id].listing_date, self.controller.util.today());
            bid.profile_id = self.selectRandomProfileId(self.db.listings[listing_id].profile_id, true);
            self.db.profiles[bid.profile_id].num_bids++;
            bid.profile_username = self.db.profiles[bid.profile_id].username;
            bid.amount = self.genRandomAmount();
            bid.bid_type = self.genRandomBidType();
            bid.interest_rate = self.genRandomInterestRate(bid.bid_type);
            bid.equity_pct = self.genRandomEquityPct();
            bid.valuation = self.controller.bids.calculateValuation(bid.amount, bid.equity_pct, true);
            bid.status = 'active';
            return bid;
        };
        self.genRandomCommentsForListing = function(listing_id) {
            var commentsForListing = {};
            var maxCommentsPerListing = 20;
            var numComments = Math.floor(Math.random() * maxCommentsPerListing);
            var comment;
            for (var i = 0; i < numComments; i++) {
                comment = self.genRandomCommentForListing(listing_id);
                commentsForListing[comment.comment_id] = comment;
            }
            self.db.listings[listing_id].num_comments = numComments; // update db with comment count
            return commentsForListing;
        };
        self.genRandomBidsForListing = function(listing_id) {
            var bidsForListing = {};
            var maxBidsPerListing = 10;
            var numBids = Math.floor(Math.random() * maxBidsPerListing);
            var valuations = [];
            var bid;
            for (var i = 0; i < numBids; i++) {
                bid = self.genRandomBidForListing(listing_id);
                bidsForListing[bid.bid_id] = bid;
                valuations.push(bid.valuation);
            }
            valuations.sort(function(a,b){
                return a - b;
            });
            var medianIdx = Math.floor(numBids / 2);
            var medianValuation = numBids == 0 ? 0 : valuations[medianIdx];
            self.db.listings[listing_id].num_bids = numBids; // update db with bid count
            self.db.listings[listing_id].median_valuation = medianValuation;
            return bidsForListing;
        };
        self.genRandomComments = function() {
            var comments = {};
            var commentsForListing = {};
            for (var listing_id in self.db.listings) {
                commentsForListing = self.genRandomCommentsForListing(listing_id);
                for (var comment_id in commentsForListing) { // add to comments list
                    comments[comment_id] = commentsForListing[comment_id];
                }
            }
            self.db.comments = comments;
        };
        self.genRandomBids = function() {
            var bids = {};
            var bidsForListing = {};
            for (var listing_id in self.db.listings) {
                bidsForListing = self.genRandomBidsForListing(listing_id);
                for (var bid_id in bidsForListing) { // add to bids list
                    bids[bid_id] = bidsForListing[bid_id];
                }
            }
            self.db.bids = bids;
        };
        self.genRandomDb = function() {
            self.db = {};
            self.genRandomProfiles(105);
            self.genRandomListings(234);
            self.genRandomComments();
            self.genRandomBids();
        };
        self.searchListings = function(searchType, keywords, profile_id, start_index, max_results) {
            var keywordArray = keywords ? keywords.split(' ') : [];
            var results = [];
            var result;
            for (var listing_id in self.db.listings) { // just full db for now
                result = self.db.listings[listing_id];
                var applicable = self.filterResultByType(result, searchType, keywordArray)
                    && (profile_id ? self.filterResultByProfileId(result, profile_id) : 1);
                if (applicable) 
                    results.push(result);
            }
            self.sortResultsByType(results, searchType);
            self.paintWithNumber(results);
            var limited_results = self.limitResults(results, start_index, max_results);
            var result_json = {
                listings: limited_results,
                listings_props: {
                    search_type: searchType,
                    keywords:  keywords,
                    profile_id: profile_id,
                    start_index: start_index,
                    num_results: limited_results.length,
                    total_results: results.length
                }
            };
            return result_json;
        };
        self.limitResults = function(results, start_index, max_results) {
            var limited_results = [];
            var start = (start_index && start_index >= 0) ? start_index : 0;
            var max = (max_results && max_results >= 0) ? max_results : 20;
            var end = (start + max) < results.length ? (start + max) : results.length;
            var j = 0;
            for (var i = start; i < end; i++) {
                limited_results[j] = results[i];
                j++;
            }
            return limited_results;
        };
        self.paintWithNumber = function(results) {
            for (var i = 0; i < results.length; i++) {
                results[i].num = i + 1;
            }
        };
        self.calculateScores = function(results) {
/*
p = votes (points) from users.
b = number of bids
c = number of comments
v = median valuation (normalized / $100,000)
t = time since submission in days
s = score
putting it together:
s = (p + b + c + v) / (t + 2)^1.5
*/
            for (var i = 0; i < results.length; i++) {
                var r = results[i];
                var p = r.num_votes;
                var b = r.num_bids;
                var c = r.num_comments;
                var v = r.median_valuation / 100000;
                var t = self.controller.util.today() - r.listing_date;
                var s = (p + b + c + v) / Math.pow(t + 2, 1.5);
                r.score = s;
            }
        };
        self.filterResultByType = function(result, searchType, keywordArray) {
            var applicable = 1;
            if (searchType == 'active') {
                applicable = (result.status == 'active') ? 1 : 0;
            }
            else if (searchType == 'closing') {
                applicable = (result.status == 'active') ? 1 : 0;
            }
            else if (searchType == 'keyword') {
                var keywordMatches = 0;
                for (var i = 0; i < keywordArray.length; i++) {
                    if (result.title.indexOf(keywordArray[i]) != -1)
                        keywordMatches++;
                    else
                        break;
                }
                applicable = keywordMatches == keywordArray.length ? 1 : 0;
            }
            else {
                applicable = 1;
            }
            return applicable;
        };
        self.filterResultByProfileId = function(result, profile_id) {
            return result.profile_id == profile_id;
        };
        self.sortResultsByType = function(results, searchType) {
            if (searchType == 'top' || searchType == 'keyword') {
                self.calculateScores(results);
                results.sort(function(listing_a, listing_b){
                    return listing_a.score - listing_b.score;
                }).reverse();
            }
            else if (searchType == 'valuation') {
                results.sort(function(listing_a, listing_b){
                    return listing_a.median_valuation - listing_b.median_valuation;
                }).reverse();
            }
            else if (searchType == 'active') {
                results.sort(function(listing_a, listing_b){
                    return listing_a.num_bids - listing_b.num_bids;
                }).reverse();
            }
            else if (searchType == 'popular') {
                results.sort(function(listing_a, listing_b){
                    return listing_a.num_votes - listing_b.num_votes;
                }).reverse();
            }
            else if (searchType == 'discussed') {
                results.sort(function(listing_a, listing_b){
                    return listing_a.num_comments - listing_b.num_comments;
                }).reverse();
            }
            else if (searchType == 'latest' || searchType == 'profile') {
                results.sort(function(listing_a, listing_b){
                    return listing_a.listing_date - listing_b.listing_date;
                }).reverse();
            }
            else if (searchType == 'closing') {
                results.sort(function(listing_a, listing_b){
                    return listing_a.closing_date - listing_b.closing_date;
                });
            }
        };
        self.commentsForListing = function(listing_id) {
            var listing = self.getListing(listing_id);
            var comments = [];
            var comment;
            for (var comment_id in self.db.comments){
                comment = self.db.comments[comment_id];
                if (comment.listing_id == listing_id && comment.status == 'active')
                    comments.push(comment);
            }
            comments.sort(function(a,b){
                return b.comment_date - a.comment_date;
            });
            for (var i = 0; i < comments.length; i++) {
                comments[i].num = i + 1;
            }
            var comments_json = {
                comments: comments,
                listing: listing
            }
            return comments_json;
        };
        self.commentsForProfile = function(profile_id) {
            var comments = [];
            var comment;
            for (var comment_id in self.db.comments){
                comment = self.db.comments[comment_id];
                if (comment.profile_id == profile_id && comment.status == 'active')
                    comments.push(comment);
            }
            comments.sort(function(a,b){
                return b.comment_date - a.comment_date;
            });
            for (var i = 0; i < comments.length; i++) {
                comments[i].num = i + 1;
            }
            var comments_json = {
                comments: comments,
                listing: null
            }
            return comments_json;
        };
        self.bidsForListing = function(listing_id) {
            var listing = self.getListing(listing_id);
            var bids = [];
            var bid;
            for (var bid_id in self.db.bids){
                bid = self.db.bids[bid_id];
                if (bid.listing_id == listing_id && bid.status == 'active')
                    bids.push(bid);
            }
            bids.sort(function(a,b){
                return b.bid_date - a.bid_date;
            });
            for (var i = 0; i < bids.length; i++) {
                bids[i].num = i + 1;
            }
            var bids_json = {
                bids: bids,
                listing: listing
            };
            return bids_json;
        };
        self.bidsForProfile = function(profile_id) {
            var bids = [];
            var bid;
            for (var bid_id in self.db.bids){
                bid = self.db.bids[bid_id];
                if (bid.profile_id == profile_id && bid.status == 'active')
                    bids.push(bid);
            }
            bids.sort(function(a,b){
                return b.bid_date - a.bid_date;
            });
            for (var i = 0; i < bids.length; i++) {
                bids[i].num = i + 1;
            }
            var bids_json = {
                bids: bids,
                listing: null
            };
            return bids_json;
        };
        self.profileForUsername = function(username) {
            var profile = null;
            for (var profile_id in self.db.profiles) {
                if (self.db.profiles[profile_id].username == username)
                    profile = self.db.profiles[profile_id];
            }
            return profile;
        };
        self.saveProfile = function(profile) {
            if (profile)
                self.db.profiles[profile.profile_id] = profile;
        };
        self.getProfile = function(profile_id) {
            if (profile_id)
                return self.db.profiles[profile_id];
        };
        self.getListing = function(listing_id) {
            if (listing_id)
                return self.db.listings[listing_id];
        };
        self.saveListing = function(listing) {
            var savedListing;
            if (listing) {
                var dbListing = self.db.listings[listing.listing_id];
                if (!dbListing) { // its new
                    self.db.listings[listing.listing_id] = listing;
                    self.db.profiles[listing.profile_id].num_listings++;
                    savedListing = listing;
                }
                else { // existing listing
                    self.db.listings[listing.listing_id] = listing;
                    savedListing = listing;
                }
            }
            return savedListing;
        };
        self.upvoteListing = function(listing_id, callback) {
            self.db.listings[listing_id].num_votes++;
            return callback();
        };
        self.activateProfile = function(profile_id){
            var profile = self.doQuery(profile_id);
            profile.status = 'active';
            return profile;
        };
        self.deactivateProfile = function(profile_id){
            var profile = self.doQuery(profile_id);
            profile.status = 'deactivated';
            return profile;
        };
        self.withdrawListing = function(listing_id, callback) {
            var listing = self.db.listings[listing_id];
            listing.status = 'withdrawn';
            callback(listing);
        };
        return self;
    };

    var User = function() {
        var self = {};
        self.controller = null;
        self.profile = null;
        self.login_url = '/_ah/login?continue=%2F';
        self.logout_url = '/_ah/logout?continue=%2F';
        self.setup = function(controller) {
            self.controller = controller;
        };
        self.setProfile = function(profile) {
            self.profile = profile;
            controller.header.displayUser(self);
        };
        self.hasVoted = function(listing_id) {
            return false;
        };
        self.login = function() {
            document.location = self.login_url;
        };
        self.logout = function() {
            document.location = self.logout_url;
        };
        return self;
    };

    var Uploader = function() {
        var self = {};
        self.controller = null;
        self.setup = function(controller) {
            self.controller = controller;
            $('#listing-upload-business-plan').change(function() {
                var filename = $(this).val();
                if (!/\.doc|\.docx|\.pdf$/.test(filename)) {
                    alert('Only doc or docx or pdf files are allowed for the business plan');
                    $(this).val('');
                }
            });
            $('#listing-upload-presentation').change(function() {
                var filename = $(this).val();
                if (!/\.ppt|\.pdf$/.test(filename)) {
                    alert('Only ppt or pdf files are allowed for the business plan');
                    $(this).val('');
                }
            });
        };
        return self;
    };

    var Header = function() {
        var self = {};
        self.controller = null;
        self.setup = function(controller) {
            self.controller = controller;
            $('#header-logo,#header-title-link').unbind().bind('click', function(){
                self.controller.execute({page:'search'});
            });
            $('#header-menu-command-login').unbind().bind('click', function(){
                self.controller.execute({page:'login'});
            });
            $('#header-menu-command-logout').unbind().bind('click', function(){
                self.controller.execute({page:'logout'});
            });
            $('#header-menu-bar-submit').unbind().bind('click', function(){
                self.controller.execute({page:'listing',action:'new'});
            });
            $('#header-menu-bar-top').unbind().bind('click', function(){
                self.controller.execute({page:'search',search_type:'top'});
            });
            $('#header-menu-bar-valuation').unbind().bind('click', function(){
                self.controller.execute({page:'search',search_type:'valuation'});
            });
            $('#header-menu-bar-active').unbind().bind('click', function(){
                self.controller.execute({page:'search',search_type:'active'});
            });
            $('#header-menu-bar-popular').unbind().bind('click', function(){
                self.controller.execute({page:'search',search_type:'popular'});
            });
            $('#header-menu-bar-discussed').unbind().bind('click', function(){
                self.controller.execute({page:'search',search_type:'discussed'});
            });
            $('#header-menu-bar-latest').unbind().bind('click', function(){
                self.controller.execute({page:'search',search_type:'latest'});
            });
            $('#header-menu-bar-closing-soon').unbind().bind('click', function(){
                self.controller.execute({page:'search',search_type:'closing'});
            });
            $('#header-menu-bar-faq').unbind().bind('click', function(){
                self.controller.execute({page:'faq'});
            });
        };
        self.displayUser = function(user) {
            if (user.profile && user.logout_url) {
                $('#header-menu-name-login').hide();
                $('#header-menu-name-username').html(user.profile.username).data('profile_id',user.profile.profile_id).show().unbind().bind('click', function(){
                    self.controller.execute({page:'profile', profile_id:$(this).data('profile_id')});
                });
                $('#header-menu-command-login').hide();
                $('#header-menu-command-logout').show();
                $('#header-menu-command-logout').data('logout_url',user.logout_url).show().unbind().bind('click', function(){
                    self.controller.execute({page:'logout', url:$(this).data('logout_url')});
                });
                $('#header-menu-bar-submit-spacer').show();
                $('#header-menu-bar-submit').show();
            }
            else {
                $('#header-menu-name-login').show();
                $('#header-menu-name-username').html(null).hide();
                $('#header-menu-command-login').show();
                $('#header-menu-command-logout').hide();
                $('#header-menu-bar-submit-spacer').hide();
                $('#header-menu-bar-submit').hide();
            }
        };
        return self;
    };

    var Search = function() {
        var self = {};
        self.controller = null;
        self.defaultSearchType = 'top';
        self.setup = function(controller) {
            self.controller = controller;
            $('#content-search-submit').unbind().bind('click', function(){
                self.controller.execute({page:'search', search_type:'keyword'});
            });
            $('#content-search-keywords').unbind().bind('keyup', function(e){
                if (e.keyCode == 13) { // return key
                    self.controller.execute({page:'search', search_type:'keyword'});
                }
            });
        };
        self.execute = function(args) {
            var search_type = args.search_type;
            var profile_id = args.profile_id;
            var start_index = args.start_index || 0;
            var max_results = 20;
            var keywords = $('#content-search-keywords').val();
            if (!search_type) {
                search_type = self.defaultSearchType;
            }
            if (keywords) {
                keywords = keywords.replace(/\btype:\w*/g, '').replace(/\s+/g, ' ').trim();
            }
            $('#content-search-keywords').val(keywords);
            var results_json = self.controller.backend.searchListings(search_type, keywords, profile_id, start_index, max_results);
            if (!results_json) {
                self.displayResultsHtml('<i>loading...</i>');
            }
            else {
                self.displayResultsJson(results_json, search_type, keywords, profile_id, start_index);
            }
            return 'search';
        };
        self.displayResultsJson = function(results_json, search_type, keywords, profile_id, start_index) {
            var props = results_json.listings_props;
            self.controller.user.setProfile(results_json.loggedin_profile);
            self.displayResults(results_json.listings, search_type, keywords, profile_id, start_index, props.num_results, props.total_results);
        };
        self.displayResultsHtml = function(resultsHtml) {
            $('#search-content-results-list').html(resultsHtml);
        };
        self.displayResults = function(results, search_type, keywords, profile_id, start_index, num_results, total_results){
            var resultsHtml = '';
            var listing;
            for (var i = 0; i < results.length; i++) { // create results
                listing = results[i];
                resultsHtml += self.controller.listing.generateListingSnippetHtml(i, listing);
            }
            if (resultsHtml == '') {
                resultsHtml = '<i>no listings found</i>';
            }
            self.displayResultsHtml(resultsHtml);
            for (var j = 0; j < results.length; j++) { // bind results
                listing = results[j];
                self.controller.listing.bindListingSnippet(j, listing);
            }
            // set pagination
            var args = {
                page: 'search',
                search_type: search_type,
                keywords: keywords,
                profile_id: profile_id,
                start_index: start_index
            }
            var prevargs, nextargs;
            if (start_index > 0) {
                prevargs = $.extend(true, {}, args);
                prevargs.start_index = start_index - 20;
                $('#search-prev-results').show().unbind()
                    .data('args', prevargs)
                    .bind('click',function(){
                        console.log('prevargs:',$(this).data('args'));
                        self.controller.execute($(this).data('args'));
                    });
            }
            else {
                $('#search-prev-results').hide();
            }
            if (start_index + num_results < total_results) {
                nextargs = $.extend(true, {}, args);
                nextargs.start_index = start_index + 20;
                $('#search-next-results').show().unbind()
                    .data('args', nextargs)
                    .bind('click',function(){
                        console.log('nextargs:',$(this).data('args'));
                        self.controller.execute($(this).data('args'));
                    });
            }
            else {
                $('#search-next-results').hide();
            }
        };
        return self;
    };

    var Profile = function() {
        var self = {};
        self.controller = null;
        self.setup = function(controller) {
            self.controller = controller;
        }
        self.execute = function(args) {
            var profile_id = args['profile_id'];
            var profile;
            $('#profile-save-message').attr('class', 'attention').html('');
            if (args.action == 'deactivate')
                profile = self.deactivateProfile(profile_id);
            else if (args.action == 'activate')
                profile = self.activateProfile(profile_id);
            else if (args.action == 'save')
                profile = self.saveProfile(profile_id);
            else
                profile = self.doQuery(profile_id);
            console.log('incoming json:' + JSON.stringify(args, null, '\t'));
            console.log('returned json:' + JSON.stringify(profile, null, '\t'));
            self.displayProfile(profile);
            return 'profile';
        };
        self.activateProfile = function(profile_id){
            return self.controller.backend.activateProfile(profile_id);
        };
        self.deactivateProfile = function(profile_id){
            return self.controller.backend.deactivateProfile(profile_id);
        };
        self.saveProfile = function(profile_id){
            var profile = self.doQuery(profile_id);
            profile.name = $('#profile-edit-name').val();
            profile.title = $('#profile-edit-title').val();
            profile.organization = $('#profile-edit-organization').val();
            profile.email = $('#profile-edit-email').val();
            profile.facebook = $('#profile-edit-facebook').val();
            profile.twitter = $('#profile-edit-twitter').val();
            profile.linkedin = $('#profile-edit-linkedin').val();
            profile.investor = $('#profile-edit-investor').attr('checked') ? 1 : 0;
            self.controller.backend.saveProfile(profile);
            if (profile)
                $('#profile-save-message').attr('class', 'confirmed').html('profile saved');
            return profile;
        };
        self.doQuery = function(profile_id){
            return self.controller.backend.getProfile(profile_id);
        };
        self.displayProfile = function(profile){
            // enable editable if logged in
            var deactivatedText = (profile && profile.status == 'active') ? '' : ' <span class="message">DEACTIVATED</span>';
            if (profile && self.controller.user.profile && self.controller.user.profile.profile_id == profile.profile_id) {
                $('#profile-form-editable').show();
                $('#profile-form-readonly').hide();

                $('#profile-edit-profile-id').val(profile.profile_id);
                $('#profile-edit-username').html(profile.username + deactivatedText);
                $('#profile-edit-name').val(profile.name);
                $('#profile-edit-title').val(profile.title);
                $('#profile-edit-organization').val(profile.organization);
                $('#profile-edit-email').val(profile.email);
                $('#profile-edit-facebook').val(profile.facebook);
                $('#profile-edit-twitter').val(profile.twitter);
                $('#profile-edit-linkedin').val(profile.linkedin);
                $('#profile-edit-investor').attr('checked', profile.investor);
                $('#profile-edit-joined-date').html(profile.joined_date);
                $('#profile-edit-open-id').html(profile.open_id);
                self.setProfileLinks(profile, true);
            }
            else if (profile) {
                $('#profile-form-editable').hide();
                $('#profile-form-readonly').show();

                $('#profile-username').html(profile.username + deactivatedText);
                $('#profile-name').html(profile.name);
                $('#profile-title').html(profile.title);
                $('#profile-organization').html(profile.organization);
                $('#profile-email').html(profile.email);
                $('#profile-email-href').attr('href', 'mailto:'+profile.email);
                $('#profile-facebook').html(profile.facebook);
                $('#profile-facebook-href').attr('href', 'http://www.facebook.com/'+profile.facebook);
                $('#profile-twitter').html(profile.twitter);
                $('#profile-twitter-href').attr('href', 'http://www.twitter.com/'+profile.twitter);
                $('#profile-linkedin').html(profile.linkedin);
                $('#profile-linkedin-href').attr('href', 'http://www.linkedin.com/'+profile.linkedin);
                $('#profile-investor').attr('checked', profile.investor);
                $('#profile-joined-date').html(profile.joined_date);
                $('#profile-open-id').html(profile.open_id);
                self.setProfileLinks(profile, false);
            }
            else {
                self.displayProfileNotFound();
            }
        };
        self.displayProfileNotFound = function() {
            $('#profile-form-editable').hide();
            $('#profile-form-readonly').show();
            $('#profile-username').html('<em>unable to retrive user profile</em>');
        };
        self.setProfileLinks = function(profile, editable) {
            var listingsSel = '#profile-' + (editable?'edit-':'') + 'num-listings';
            var bidsSel     = '#profile-' + (editable?'edit-':'') + 'num-bids';
            var commentsSel = '#profile-' + (editable?'edit-':'') + 'num-comments';
            $(listingsSel).html(profile.num_listings);
            $(bidsSel).html(profile.num_bids);
            $(commentsSel).html(profile.num_comments);
            $(listingsSel+'-link').unbind().data('profile_id',profile.profile_id).bind('click',function(){
                self.controller.execute({page:'search',search_type:'profile',profile_id:$(this).data('profile_id')});
            });
            $(bidsSel+'-link').unbind().data('profile_id',profile.profile_id).bind('click',function(){
                self.controller.execute({page:'bids',profile_id:$(this).data('profile_id')});
            });
            $(commentsSel+'-link').unbind().data('profile_id',profile.profile_id).bind('click',function(){
                self.controller.execute({page:'comments',profile_id:$(this).data('profile_id')});
            });
            if (editable) {
                $('#profile-save-link').show().unbind().data('profile_id',profile.profile_id).bind('click',function(e){
                    e.preventDefault();
                    self.controller.execute({page:'profile',action:'save',profile_id:$(this).data('profile_id')});
                });
                if (profile.status == 'active') {
                    $('#profile-activate-link').hide();
                    $('#profile-deactivate-link').show().unbind().data('profile_id',profile.profile_id).bind('click',function(){
                        self.controller.execute({page:'profile',action:'deactivate',profile_id:$(this).data('profile_id')});
                    });
                }
                else {
                    $('#profile-activate-link').show().unbind().data('profile_id',profile.profile_id).bind('click',function(){
                        self.controller.execute({page:'profile',action:'activate',profile_id:$(this).data('profile_id')});
                    });
                    $('#profile-deactivate-link').hide();
                }
            }
        };
        return self;
    };

    var Listing = function() {
        var self = {};
        self.controller = null;
        self.setup = function(controller) {
            self.controller = controller;
        }
        self.execute = function(args) {
            var profile = self.controller.user.profile;
            var listing_id = args['listing_id'];
            var isNew = args.action == 'new';
            $('#listing-save-message').attr('class', 'attention').html('');
            var callback = function(listing) {
                self.displayListing(listing, isNew);
            }
            if (args.action == 'withdraw')
                self.controller.backend.withdrawListing(listing_id, callback);
            else if (args.action == 'save')
                self.saveListing(listing_id, callback);
            else if (args.action == 'new' && profile)
                self.newListing(profile, callback);
            else if (args.action == 'new' && !profile)
                callback({});
            else
                callback(self.controller.backend.getListing(listing_id));
            return 'listing';
        };
        self.saveListing = function(listing_id){
            var listing = {};
            listing.listing_id = listing_id;
            listing.title = $('#listing-edit-title').val();
            listing.median_valuation = $('#listing-edit-median-valuation').val();
            listing.num_votes =  $('#listing-edit-num-votes').val();
            listing.num_bids =  $('#listing-edit-num-bids').val();
            listing.num_comments =  $('#listing-edit-num-comments').val();
            listing.profile_id =  $('#listing-edit-profile-id').val();
            listing.profile_username =  $('#listing-edit-profile-username').val();
            listing.listing_date =  $('#listing-edit-listing-date').val();
            listing.closing_date = $('#listing-edit-closing-date').val();
            listing.status = $('#listing-edit-status').val();
            var raw_amt = $('#listing-edit-suggested-amt').val().replace(/[^\d]/g,'');
            var raw_pct = $('#listing-edit-suggested-pct').val().replace(/[^\d]/g,'');
            listing.suggested_amt = raw_amt;
            listing.suggested_pct = raw_pct;
            listing.suggested_val = self.controller.bids.calculateValuation(listing.suggested_amt, listing.suggested_pct);
            listing.summary = $('#listing-edit-summary').val();
            listing.business_plan_url = $('#listing-upload-business-plan').val();
            listing.presentation_url = $('#listing-upload-presentation').val();
            var savedListing = self.controller.backend.saveListing(listing);
            if (savedListing)
                $('#listing-save-message').attr('class', 'confirmed').html('listing saved');
            else
                $('#listing-save-message').attr('class', 'confirmed').html('unable to save listing');
            return savedListing;
        };
        self.newListing = function(profile) {
            var listing = {};
            listing.listing_id = self.controller.util.generateGuid();
            listing.title = 'Enter listing title here';
            listing.median_valuation = 0;
            listing.num_votes = 0;
            listing.num_bids = 0;
            listing.num_comments = 0;
            listing.profile_id = profile.profile_id;
            listing.profile_username = profile.username;
            listing.listing_date =  self.controller.util.today();
            listing.closing_date = self.controller.util.today();
            listing.status = 'active';
            listing.suggested_amt = 10000;
            listing.suggested_pct = 10;
            listing.suggested_val = self.controller.bids.calculateValuation(listing.suggested_amt, listing.suggested_pct);
            listing.summary = 'Enter listing summary here.';
            listing.business_plan_url = '';
            listing.presentation_url = '';
            return listing;
        };
        self.displayListingSnippetHtml = function(html) {
            $('#listing-snippet').html(html);
        };
        self.displayListing = function(listing, isNew){
            var resultsHtml = '';
            var profile = self.controller.user.profile;
            if (isNew && !profile) {
                $('#listing-snippet').html('<em>You must be logged to submit a new listing</em>');
                return;
            }
            else if (!listing) {
                $('#listing-snippet').html('<em>no listings found</em>');
                return;
            }
            else {
                $('#listing-snippet').html(self.controller.listing.generateListingSnippetHtml('listing', listing));
                self.controller.listing.bindListingSnippet('listing', listing);
            }

            // set listing message
            var msg = '';
            var class = 'attention';
            if (profile && profile.profile_id == listing.profile_id && listing.status == 'withdrawn') {
                msg = 'You may not change your listing now that it is withdrawn.';
            }
            else if (profile && profile.profile_id == listing.profile_id && listing.status == 'closed') {
                msg = 'You may not change your listing now that it is closed.';
            }
            else if (listing.status == 'withdrawn') {
                msg = 'This listing is withdrawn and thus bidding is suspended.';
            }
            else if (listing.status == 'closed') {
                msg = 'This listing is withdrawn and accepts no more bids.';
            }
            else {
                msg = 'This listing is active and accepting bids.';
                class = 'confirmed';
            }
            $('#listing-form-message').attr('class', class).html(msg);

            // enable editable if logged in
            if (profile && profile.profile_id == listing.profile_id && listing.status == 'active') {
                $('#listing-form-editable').show();
                $('#listing-form-readonly').hide();
                $('#listing-edit-title').val(listing.title);
                $('#listing-edit-median-valuation').val(listing.median_valuation);
                $('#listing-edit-num-votes').val(listing.num_votes);
                $('#listing-edit-num-bids').val(listing.num_bids);
                $('#listing-edit-num-comments').val(listing.num_comments);
                $('#listing-edit-profile-id').val(listing.profile_id);
                $('#listing-edit-profile-username').val(listing.profile_username);
                $('#listing-edit-listing-date').val(listing.listing_date);
                $('#listing-edit-closing-date').val(listing.closing_date);
                $('#listing-edit-status').val(listing.status);
                $('#listing-edit-suggested-amt').val(self.controller.util.addCommas(listing.suggested_amt));
                $('#listing-edit-suggested-pct').val(listing.suggested_pct);
                $('#listing-edit-suggested-val').html(self.controller.util.addCommas(listing.suggested_val));
                $('#listing-edit-summary').val(listing.summary);
                $('#listing-edit-suggested-amt, #listing-edit-suggested-pct').unbind().bind('change',function(e){
                    self.recalculateSuggestedValuation();
                });
                $('#listing-save-link').unbind().data('listing_id',listing.listing_id).bind('click',function(e){
                    e.preventDefault();
                    self.controller.execute({page:'listing',action:'save',listing_id:$(this).data('listing_id')});
                });
                $('#listing-edit-business-plan-link').unbind().data('business_plan_url',listing.business_plan_url).bind('click',function(){
                    document.location = $(this).data('business_plan_url');
                });
                $('#listing-edit-presentation-link').unbind().data('presentation_url',listing.presentation_url).bind('click',function(){
                    document.location = $(this).data('presentation_url');
                });
                if (isNew)
                    $('#listing-withdraw-link').hide();
                else
                    $('#listing-withdraw-link').show().unbind().data('listing_id',listing.listing_id).bind('click',function(){
                        self.controller.execute({page:'listing',action:'withdraw',listing_id:$(this).data('listing_id')});
                    });
            }
            else {
                $('#listing-form-editable').hide();
                $('#listing-form-readonly').show();
                $('#listing-readonly-suggested-amt').html(self.controller.util.addCommas(listing.suggested_amt));
                $('#listing-readonly-suggested-pct').html(listing.suggested_pct);
                $('#listing-readonly-suggested-val').html(self.controller.util.addCommas(listing.suggested_val));
                $('#listing-readonly-summary').html(listing.summary);
                $('#listing-readonly-business-plan-link').unbind().data('business_plan_url',listing.business_plan_url).bind('click',function(){
                    document.location = $(this).data('business_plan_url');
                });
                $('#listing-readonly-presentation-link').unbind().data('presentation_url',listing.presentation_url).bind('click',function(){
                    document.location = $(this).data('presentation_url');
                });
             }
        };
        self.recalculateSuggestedValuation = function() {
            var suggested_amt  = $('#listing-edit-suggested-amt').val() || '';
            var suggested_pct  = $('#listing-edit-suggested-pct').val() || '';
            suggested_amt  = suggested_amt.replace(/[^\d]/g,'');
            suggested_pct  = suggested_pct.replace(/[^\d]/g,'');
            var valuation = self.controller.bids.calculateValuation(suggested_amt, suggested_pct, true);
            var validationMsg = self.controller.bids.validateBid(suggested_amt, 'common', 0, suggested_pct, valuation);
            $('#listing-save-message').attr('class', 'attention').html(validationMsg);
            var displayVal = valuation ? self.controller.util.addCommas(valuation) : '';
            $('#listing-edit-suggested-val').html(displayVal);
        };
        self.bindListingSnippet = function(i, listing) {
            var upvote_item = document.getElementById('content-results-list-item-upvote-'+i);
            $('#content-results-list-item-title-'+i).data('listing_id',listing.listing_id).unbind().bind('click', function(){
                self.controller.execute({page:'listing', listing_id:$(this).data('listing_id')});
            });           
            $('#content-results-list-item-profile-'+i).data('profile_id',listing.profile_id).unbind().bind('click', function(){
                self.controller.execute({page:'profile', profile_id:$(this).data('profile_id')});
            });           
            $('#content-results-list-item-comments-'+i).data('listing_id',listing.listing_id).unbind().bind('click', function(){
                self.controller.execute({page:'comments', listing_id:$(this).data('listing_id')});
            }); 
            $('#content-results-list-item-bids-'+i).data('listing_id',listing.listing_id).unbind().bind('click', function(){
                self.controller.execute({page:'bids', listing_id:$(this).data('listing_id')});
            });
            if (isFinite(i)) {
                console.log('binding:'+i);
                $(upvote_item)
                    .data('index', i)
                    .data('listing_id', listing.listing_id)
                    .data('num_votes', listing.num_votes);
                if (!listing.votable) {
                    $(upvote_item).css('visibility', 'hidden').unbind();
                }
                else {
                    $(upvote_item)
                        .unbind()
                        .bind('click', function(){
                            var index = $(this).data('index');
                            var listing_id = $(this).data('listing_id');
                            var num_votes = $(this).data('num_votes');
                            var list_item = this;
                            var votes_item = document.getElementById('content-results-list-item-votes-'+index);
                            console.log('clicked');
                            var callback = function(json) {
                                console.log('callback');
                                if (json) {
                                    var new_votes = num_votes + 1;
                                    $(votes_item).html(new_votes);
                                    $(list_item)
                                        .data('num_votes', new_votes)
                                        .css('visibility', 'hidden')
                                        .unbind(); // don't let them click twice
                                }
                            };
                            self.controller.backend.upvoteListing(listing_id, callback);
                        });
                }
            }
        };
        self.generateListingSnippetHtml = function(i, listing) {
            var days_ago = listing.days_ago != null ? listing.days_ago : self.controller.util.today() - listing.listing_date; /* paint with time proximity */
            var days_left = listing.days_left != null ? listing.days_left : listing.closing_date - self.controller.util.today(); /* paint with time proximity */
            var resultHtml = '';
            var evenOdd;
            if (isFinite(i)) {
                evenOdd = (i % 2 == 0) ? 'even' : 'odd';
                resultHtml += '<div class="content-results-list-item content-results-list-item-' + evenOdd + '">';
                resultHtml += '<div class="content-results-list-item-num">' + listing.num + '</div>';
                resultHtml += '<div class="content-results-list-item-upvote" id="content-results-list-item-upvote-' + i + '"></div>';
            }
            else {
                resultHtml += '<div class="content-results-list-item>';
                resultHtml += '<div class="content-results-list-item-num"></div>';
                resultHtml += '<div class="content-results-list-item-upvote-filler"></div>';
            }
            resultHtml += '<div class="content-results-list-item-title link" id="content-results-list-item-title-' + i + '">';
            resultHtml += listing.title;
            resultHtml += '</div>';
            resultHtml += '<div class="content-results-list-item-profile link" id="content-results-list-item-profile-' + i + '">';
            resultHtml += '(' + listing.profile_username + ')';
            resultHtml += '</div>';
            resultHtml += '<div class="content-results-list-item-clear"></div>';
            resultHtml += '<div class="content-results-list-item-detail">';
            resultHtml += '<span id="content-results-list-item-votes-' + i + '">' + listing.num_votes + '</span>' + ' votes | ';
            resultHtml += (days_ago == 0) ? 'listed today' : days_ago + ' day' + (days_ago>1?'s':'')  + ' ago';
            resultHtml += ' | ';
            resultHtml += (listing.status == 'active' && days_left == 0) ? 'closing today!' : '';
            resultHtml += (listing.status == 'active' && days_left < 0) ? 'listing closed' : '';
            resultHtml += (listing.status == 'active' && days_left > 0) ? 'closing in ' + days_left + ' day' + (days_left>1?'s':'') : '';
            resultHtml += (listing.status == 'closed') ? 'listing closed' : '';
            resultHtml += (listing.status == 'withdrawn') ? 'listing withdrawn' : '';
            resultHtml += ' | ';
            resultHtml += '<span class="link" id="content-results-list-item-comments-' + i + '">';
            resultHtml += listing.num_comments + ' comment' + (listing.num_comments==1?'':'s');
            resultHtml += '</span> | ';
            resultHtml += '$' + self.controller.util.addCommas(listing.median_valuation) + ' after ';
            resultHtml += '<span class="link" id="content-results-list-item-bids-' + i + '">';
            resultHtml += listing.num_bids + ' bid' + (listing.num_bids==1?'':'s');
            resultHtml += '</span> | ';
            resultHtml += 'listed ' + self.controller.util.formatDate(listing.listing_date) + ' | ';
            resultHtml += (listing.status == 'active') ? 'closing ' + self.controller.util.formatDate(listing.closing_date) : '';
            resultHtml += (listing.status == 'closed') ? 'closed ' + self.controller.util.formatDate(listing.closing_date) : '';
            resultHtml += (listing.status == 'withdrawn') ? 'withdrawn ' + self.controller.util.formatDate(listing.closing_date) : '';
            resultHtml += '</div>';
            resultHtml += '</div>';
            resultHtml += '<div class="content-results-list-item-clear"></div>';
            return resultHtml;
       }
       return self;
    }

    var Comments = function() {
        var self = {};
        self.controller = null;
        self.setup = function(controller) {
            self.controller = controller;
        }
        self.execute = function(args) {
            var listing_id = args['listing_id'];
            var profile_id = args['profile_id'];
            var comment_id = args['comment_id'];
            var results;
            $('#comment-save-message').attr('class', 'attention').html('');
            if (comment_id && args['action'] == 'delete') {
                self.deleteComment(comment_id);
                delete args['action'];
                return self.execute(args);
            }
            else if (listing_id && profile_id && args['action'] == 'save') {
                results = self.saveComment(listing_id, profile_id);
            }
            else if (listing_id) {
                $('#comment-textarea').val('');
                results = self.commentsForListing(listing_id);
            }
            else if (profile_id) {
                $('#comment-textarea').val('');
                results = self.commentsForProfile(profile_id);
            }
            console.log('incoming json:' + JSON.stringify(args, null, '\t'));
            console.log('returned json:' + JSON.stringify(results, null, '\t'));
            self.displayResults(results);
            return 'comments';
        };
        self.deleteComment = function(comment_id){
            self.controller.backend.deleteComment(comment_id);
        };
        self.saveComment = function(listing_id, profile_id){
            var commentText = $('#comment-textarea').val();
            var comment = self.controller.backend.addComment(listing_id, profile_id, commentText);
            if (comment) {
                $('#comment-save-message').attr('class', 'confirmed').html('comment saved');
                $('#comment-textarea').val('');
            }
            var results = self.commentsForListing(listing_id);
            return results;
        };
        self.commentsForListing = function(listing_id){
            return self.controller.backend.commentsForListing(listing_id);
        };
        self.commentsForProfile = function(profile_id){
            return self.controller.backend.commentsForProfile(profile_id);
        };
        self.displayNoResultsHtml = function(resultsHtml) {
            $('#comments-listing-snippet').html('Comments:');
            $('#comment-loggedin-add').hide();
            $('#comment-not-loggedin-msg').hide();
            $('#comments-content-results-list').html(resultsHtml);
        };
        self.displayResults = function(results){
            var listing = results ? results.listing : null;
            var comments = results ? results.comments : null;
            var profile = self.controller.user.profile;
            var resultsHtml = '';
            var comment;
            if (comments && comments.length > 0) {
                for (var i = 0; i < comments.length; i++) { // create results
                    comment = comments[i];
                    resultsHtml += self.generateResultHtml(i, comment, listing, profile);
                }
            }
            else if (comments && comments.length == 0) {
                resultsHtml = '<i>no comments found</i>';
            }
            else {
                resultsHtml = '<i>loading...</i>';
            }
            // display html
            $('#comments-content-results-list').html(resultsHtml);
            // enable editable if logged in
            if (listing) {
                $('#comments-listing-snippet').html(self.controller.listing.generateListingSnippetHtml('comments', listing));
                self.controller.listing.bindListingSnippet('comments', listing);
                if (profile) {
                    $('#comment-loggedin-add').show();
                    $('#comment-not-loggedin-msg').hide();
                    $('#comment-save-button').show().unbind().data('listing_id',listing.listing_id).data('profile_id',profile.profile_id).bind('click',function(e){
                        e.preventDefault();
                        self.controller.execute({page:'comments',action:'save',listing_id:$(this).data('listing_id'),profile_id:$(this).data('profile_id')});
                    });
                }
                else {
                    $('#comment-loggedin-add').hide();
                    $('#comment-not-loggedin-msg').show();
                }
            }
            else {
                $('#comments-listing-snippet').html('Comments:');
                $('#comment-loggedin-add').hide();
                $('#comment-not-loggedin-msg').hide();
            }
            // bind results
            if (comments && comments.length > 0) {
                for (var i = 0; i < comments.length; i++) {
                    comment = comments[i];
                    $('#comments-item-profile-'+i).data('profile_id',comment.profile_id).unbind().bind('click', function(){
                        self.controller.execute({page:'profile', profile_id:$(this).data('profile_id')});
                    });           
                    $('#comments-item-listing-'+i).data('listing_id',comment.listing_id).unbind().bind('click', function(){
                        self.controller.execute({page:'listing', listing_id:$(this).data('listing_id')});
                    });           
                    if (profile && profile.profile_id == comment.profile_id) {
                        $('#comments-item-delete-'+i)
                            .data('comment_id', comment.comment_id)
                            .data('profile_id', profile ? comment.profile_id : '')
                            .data('listing_id', listing ? comment.listing_id : '')
                            .unbind().bind('click', function(){
                            self.controller.execute({
                                page:'comments',
                                action:'delete',
                                comment_id:$(this).data('comment_id'),
                                profile_id:$(this).data('profile_id'),
                                listing_id:$(this).data('listing_id')
                            });
                        });           
                    }
                }
            }
        };
        self.generateResultHtml = function(i, comment, listing, profile) {
            var resultHtml = '';
            resultHtml += '<div class="content-results-list-item">';
            resultHtml += '<div class="content-results-list-item-num">' + comment.num + '</div>';
            resultHtml += '<div class="content-results-list-item-title">';
            resultHtml += comment.text;
            resultHtml += '</div>';
            resultHtml += (profile && profile.profile_id == comment.profile_id)
                              ? '<div class="content-results-list-item-profile link" id="comments-item-delete-' + i + '">(delete comment)</div>'
                              : '';
            resultHtml += '<div class="content-results-list-item-clear"></div>';
            resultHtml += '<div class="content-results-list-item-detail">';
            resultHtml += 'by ';
            resultHtml += '<span class="link" id="comments-item-profile-' + i + '">'
            resultHtml += comment.profile_username;
            resultHtml += '</span>'
            resultHtml += ' on ';
            resultHtml += self.controller.util.formatDate(comment.comment_date);
            resultHtml += listing ? '' : ' for <span class="link" id="comments-item-listing-' + i + '">' + comment.listing_title + '</span>';
            resultHtml += '</div>';
            resultHtml += '</div>'
            resultHtml += '<div class="content-results-list-item-clear"></div>';
            return resultHtml;
        };
        return self;
    };

    var Bids = function() {
        var self = {};
        self.controller = null;
        self.setup = function(controller) {
            self.controller = controller;
        }
        self.execute = function(args) {
            var listing_id = args['listing_id'];
            var profile_id= args['profile_id'];
            var bid_id = args['bid_id'];
            var results;
            if (args['action'] != 'save')
                self.clearBidFields();
            $('#bid-save-message').attr('class', 'attention').html('');
            if (bid_id && args['action'] == 'delete') {
                self.deleteBid(bid_id);
                delete args['action'];
                return self.execute(args);
            }
            else if (listing_id && profile_id && args['action'] == 'save') {
                results = self.saveBid(listing_id, profile_id);
            }
            else if (listing_id) {
                results = self.bidsForListing(listing_id);
            }
            else if (profile_id) {
                results = self.bidsForProfile(profile_id);
            }
            console.log('incoming json:' + JSON.stringify(args, null, '\t'));
            console.log('returned json:' + JSON.stringify(results, null, '\t'));
            self.displayResults(results);
            return 'bids';
        };
        self.deleteBid = function(bid_id) {
            self.controller.backend.deleteBid(bid_id);
        };
        self.saveBid = function(listing_id, profile_id){
            var raw_amt  = $('#bid-amt').val() || '';
            var raw_pct  = $('#bid-pct').val() || '';
            var raw_type = $('#bid-type').val() || '';
            var raw_rate = $('#bid-rate').val() || '';

            raw_amt = raw_amt.replace(/[^\d]+/g,'');
            raw_pct = raw_pct.replace(/[^\d]+/g,'');
            raw_rate = raw_rate.replace(/[^\d]+/g,'');

            var bid_amt  = raw_amt != '' ? raw_amt : 0;
            var bid_type = raw_type in {common:1,preferred:1,note:1} ? raw_type : 'common';
            var bid_rate = raw_rate != '' ? raw_rate : 0;
            var bid_pct  = raw_pct != '' ? raw_pct : 0;

            var valuation = self.calculateValuation(bid_amt, bid_pct, true);

            var validationMsg = self.validateBid(bid_amt, bid_type, bid_rate, bid_pct, valuation);
            if (validationMsg == '') {
                var bid = self.controller.backend.addBid(listing_id, profile_id, bid_amt, bid_pct, bid_type, bid_rate);
                if (bid) {
                    $('#bid-save-message').attr('class', 'confirmed').html('bid saved');
                    self.clearBidFields();
                }
            }
            else {
                $('#bid-save-message').attr('class', 'attention').html(validationMsg);
            }
            var results = self.bidsForListing(listing_id);
            return results;
        };
        self.validateBid = function(bid_amt, bid_type, bid_rate, bid_pct, valuation) {
            var msg;
            if (bid_amt < 1000) {
                msg = 'your bid must be at least $1,000';
            }
            else if (bid_amt > 1000000) {
                msg = 'your bid must be no more than $1,000,000';
            }
            else if (bid_pct < 1) {
                msg = 'your bid percentage must be at least 1%';
            }
            else if (bid_pct > 50) {
                msg = 'your bid percentage must be no more than 50%';
            }
            else if (bid_type != 'common' && bid_rate < 1) {
                msg = 'your bid preferred or note rate must be at least 1%';
            }
            else if (bid_type != 'common' && bid_rate > 20) {
                msg = 'your bid interest rate must be no more than 20%';
            }
            else if (valuation < 10000) {
                msg = 'your calculated valuation must be at least $10,000';
            }
            else {
                msg = '';
            }
            return msg;
        };
        self.clearBidFields = function() {
            $('#bid-amt').val('');
            $('#bid-pct').val('');
            $('#bid-type').val('common');
            $('#bid-rate').val('');
            $('#bid-rate').attr('disabled', true);
            $('#bid-calculated-valuation').html('');
        };
        self.bidsForListing = function(listing_id){
            return self.controller.backend.bidsForListing(listing_id);
        };
        self.bidsForProfile = function(profile_id){
            return self.controller.backend.bidsForProfile(profile_id);
        };
        self.displayNoResultsHtml = function(resultsHtml) {
            $('#bids-form-loggedin').hide();
            $('#bids-form-not-loggedin').hide();
            $('#bids-listing-snippet').html('');
            $('#bids-content-results-list').html(resultsHtml);
        };
        self.displayResults = function(results){
            var listing = results ? results.listing : null;
            var bids = results ? results.bids : null;
            var profile = self.controller.user.profile;
            var resultsHtml = '';
            var bid;
            if (bids && bids.length > 0) {
                for (var i = 0; i < bids.length; i++) { // create results
                    bid = bids[i];
                    resultsHtml += self.generateResultHtml(i, bid, listing, profile);
                }
            }
            else if (bids && bids.length == 0) {
                resultsHtml = '<i>no bids found</i>';
            }
            else {
                resultsHtml = '<i>loading...</i>';
            }
            // display html
            $('#bids-content-results-list').html(resultsHtml);
            // set login visibility
            if (listing) {
                $('#bids-listing-snippet').html(self.controller.listing.generateListingSnippetHtml('bids', listing));
                self.controller.listing.bindListingSnippet('bids', listing);
                if (listing.status != 'active') {
                    $('#bids-form-loggedin').hide();
                    $('#bids-form-not-loggedin').show().html('This bid is no longer active');
                }
                else if (profile && profile.profile_id == listing.profile_id) {
                    $('#bids-form-loggedin').hide();
                    $('#bids-form-not-loggedin').show().html('You may not bid on your own listing');
                }
                else if (profile && profile.investor) {
                    $('#bids-form-loggedin').show();
                    $('#bids-form-not-loggedin').hide();
                    $('#bid-save-button').show().unbind().data('listing_id',listing.listing_id).data('profile_id',profile.profile_id).bind('click',function(e){
                        e.preventDefault();
                        self.controller.execute({page:'bids',action:'save',listing_id:$(this).data('listing_id'),profile_id:$(this).data('profile_id')});
                    });
                    $('#bid-amt,#bid-pct,#bid-type,#bid-rate').unbind().bind('change',function(e){
                        self.recalculateValuation();
                    });
                    $('#bid-type').unbind().bind('change',function(e){
                        if ($('#bid-type').val() == 'common')
                            $('#bid-rate').attr('disabled', true);
                        else 
                            $('#bid-rate').removeAttr('disabled');
                    });
                }
                else if (profile && !profile.investor) {
                    $('#bids-form-loggedin').hide();
                    $('#bids-form-not-loggedin').show().html('You must be an investor to place a bid');
                }
                else {
                    $('#bids-form-loggedin').hide();
                    $('#bids-form-not-loggedin').show().html('You must be a logged in investor to place a bid');
                }
            }
            else {
                $('#bids-form-loggedin').hide();
                $('#bids-form-not-loggedin').hide();
                $('#bids-listing-snippet').html('');
            }
            if (bids && bids.length > 0) {
                for (var i = 0; i < bids.length; i++) {
                    bid = bids[i];
                    $('#bids-item-profile-'+i).data('profile_id',bid.profile_id).unbind().bind('click', function(){
                        self.controller.execute({page:'profile', profile_id:$(this).data('profile_id')});
                    });           
                    $('#bids-item-listing-'+i).data('listing_id',bid.listing_id).unbind().bind('click', function(){
                        self.controller.execute({page:'listing', listing_id:$(this).data('listing_id')});
                    });           
                    if (profile && profile.profile_id == bid.profile_id) {
                        $('#bids-item-delete-'+i)
                            .data('bid_id', bid.bid_id)
                            .data('profile_id', profile ? bid.profile_id : '')
                            .data('listing_id', listing ? bid.listing_id : '')
                            .unbind().bind('click', function(){
                            self.controller.execute({
                                page:'bids',
                                action:'delete',
                                bid_id:$(this).data('bid_id'),
                                profile_id:$(this).data('profile_id'),
                                listing_id:$(this).data('listing_id')
                            });
                        });           
                    }
                }
            }
        };
        self.formatBidType = function(bid_type) {
            var visualMapping = {
                common: 'common stock',
                preferred: 'preferred stock',
                note: 'a convertible note'
            };
            return visualMapping[bid_type];
        };
        self.generateResultHtml = function(i, bid, listing, profile) {
            var resultHtml = '';
            resultHtml += '<div class="content-results-list-item">';
            resultHtml += '<div class="content-results-list-item-num">' + bid.num + '</div>';
            resultHtml += '<div class="content-results-list-item-title">';
            resultHtml += 'Valued at ';
            resultHtml += '$' + self.controller.util.addCommas(bid.valuation);
            resultHtml += ' with a bid of ';
            resultHtml += '$' + self.controller.util.addCommas(bid.amount);
            resultHtml += ' for ' + bid.equity_pct + '%';
            resultHtml += ' with ' + self.formatBidType(bid.bid_type);
            resultHtml += bid.interest_rate ? ' @ ' + bid.interest_rate + '%' : '';
            resultHtml += '</div>';
            resultHtml += (profile && profile.profile_id == bid.profile_id)
                              ? '<div class="content-results-list-item-profile link" id="bids-item-delete-' + i + '">(withdraw bid)</div>'
                              : '';
            resultHtml += '<div class="content-results-list-item-clear"></div>';
            resultHtml += '<div class="content-results-list-item-detail">';
            resultHtml += 'by ';
            resultHtml += '<span class="link" id="bids-item-profile-' + i + '">'
            resultHtml += bid.profile_username;
            resultHtml += '</span>'
            resultHtml += ' on ';
            resultHtml += self.controller.util.formatDate(bid.bid_date);
            resultHtml += listing ? '' : ' for <span class="link" id="bids-item-listing-' + i + '">' + bid.listing_title + '</span>';
            resultHtml += '</div>';
            resultHtml += '</div>'
            resultHtml += '<div class="content-results-list-item-clear"></div>';
            return resultHtml;
        };
        self.recalculateValuation = function(){
            var bid_amt  = $('#bid-amt').val() || '';
            var bid_pct  = $('#bid-pct').val() || '';
            var bid_type = $('#bid-type').val() || '';
            var bid_rate = $('#bid-rate').val() || '';
            bid_amt  = bid_amt.replace(/[^\d]/g,'');
            bid_pct  = bid_pct.replace(/[^\d]/g,'');
            bid_rate = bid_rate.replace(/[^\d]/g,'');
            var valuation = self.calculateValuation(bid_amt, bid_pct, true);
            var validationMsg = self.validateBid(bid_amt, bid_type, bid_rate, bid_pct, valuation);
            $('#bid-save-message').attr('class', 'attention').html(validationMsg);
            var displayVal = valuation ? self.controller.util.addCommas(valuation) : '';
            $('#bid-calculated-valuation').html(displayVal);
        };
        self.calculateValuation = function(amount, equity_pct, thousands) {
            var valuation;
            if (amount >= 1000 && equity_pct >= 1) {
                if (thousands)
                    valuation = Math.floor(1000 * Math.floor((100 * amount / equity_pct) / 1000));
                else
                    valuation = Math.floor(100 * amount / equity_pct);
            }
            else {
                valuation = 0;
            }
            return valuation;
        };
        return self;
    };

    var RestBackend = function() {
        var self = {};
        self.controller = null;
        self.setup = function(controller) {
            self.controller = controller;
        }
        // profile methods
        self.getProfile = function(profile_id) {
            var url = '/user?id=' + profile_id;
            $.getJSON(url, function(results_json) {
                console.log(url + ' -> ' + JSON.stringify(results_json, null, '\t'));
                if (results_json) {
                    self.controller.profile.displayProfile(results_json);
                }
                else {
                    self.controller.profile.displayProfileNotFound();
                }
            });
            return null;
        };
        self.profileForUsername = function(username) {
            var url = '/user/' + username;
            $.getJSON(url, function(results_json) {
                console.log(url + ' -> ' + JSON.stringify(results_json, null, '\t'));
                if (results_json) {
                    self.controller.profile.displayProfile(results_json);
                }
                else {
                    self.controller.profile.displayProfileNotFound();
                }
            });
            return null;
        };
        self.saveProfile = function(profile) {
        };
        self.activateProfile = function(profile_id) {
        };
        self.deactivateProfile = function(profile_id) {
        };
        // listing methods
        self.getListing = function(listing_id) {
            var url = '/listings/get/' + listing_id;
            $.getJSON(url, function(results_json) {
                console.log(url + ' -> ' + JSON.stringify(results_json, null, '\t'));
                if (results_json) {
                    self.controller.listing.displayListing(results_json, false);
                }
                else {
                    self.controller.search.displayListingSnippetHtml('<i>unable to retrieve listing</i>');
                }
            });
            return null;
        };
        self.searchListings = function(searchType, keywords, profile_id, start_index, max_results) {
            var pathSuffix = '';
            if (profile_id !== undefined) {
                pathSuffix = '/user/?id=' + profile_id;
            }
            else {
                pathSuffix = searchType + '/?max_results=20';
            }
            var url = '/listings/' + pathSuffix;
            $.getJSON(url, function(results_json) {
                console.log(url + ' -> ' + JSON.stringify(results_json, null, '\t'));
                if (results_json && results_json.listings_props) {
                    var results = results_json.listings;
                    var search_type = results_json.search_type;
                    var keywords = results_json.keywords;
                    var profile_id = results_json.profile_id;
                    var start_index = results_json.start_index;
                    var num_results = results_json.num_results;
                    var total_results = results_json.total_results;
                    self.controller.user.setProfile(results_json.loggedin_profile, results_json.logout_url);
                    self.controller.search.displayResults(results, search_type, keywords, profile_id, start_index, num_results, total_results);
                }
                else {
                    self.controller.search.displayResultsHtml('<i>unable to retrieve listings</i>');
                }
            });
            return null;
        };
        self.saveListing = function(listing) {
        };
        self.upvoteListing = function(listing_id, callback) {
            var url = '/listings/up/' + listing_id;
            $.getJSON(url, callback);
        };
        self.withdrawListing = function(listing_id, callback) {
            var url = '/listings/withdraw/' + listing_id;
            $.getJSON(url, callback);
        };
        // comment methods
        self.commentsForListing = function(listing_id) {
            var url = '/comments/listing/' + listing_id + '/';
            $.getJSON(url, function(results_json) {
                console.log(url + ' -> ' + JSON.stringify(results_json, null, '\t'));
                if (results_json && results_json.listing) {
                    self.controller.comments.displayResults(results_json);
                }
                else {
                    self.controller.comments.displayNoResultsHtml('<i>no comments found</i>');
                }
            });
            return null;
         };
        self.commentsForProfile = function(profile_id) {
            var url = '/comments/user/' + profile_id + '/';
            $.getJSON(url, function(results_json) {
                console.log(url + ' -> ' + JSON.stringify(results_json, null, '\t'));
                // if (results_json && results_json.profile) {
                if (results_json) {
                    self.controller.comments.displayResults(results_json);
                }
                else {
                    self.controller.comments.displayNoResultsHtml('<i>no comments found</i>');
                }
            });
            return null;
        };
        self.addComment = function(listing_id, profile_id, commentText) {
        };
        self.deleteComment = function(comment_id) {
        };
        // bid methods
        self.bidsForListing = function(listing_id) {
            var url = '/bids/listing/' + listing_id + '/';
            $.getJSON(url, function(results_json) {
                console.log(url + ' -> ' + JSON.stringify(results_json, null, '\t'));
                if (results_json && results_json.listing) {
                    self.controller.bids.displayResults(results_json);
                }
                else {
                    self.controller.bids.displayNoResultsHtml('<i>no bids found</i>');
                }
            });
            return null;
        };
        self.bidsForProfile = function(profile_id) {
            var url = '/bids/user/' + profile_id + '/';
            $.getJSON(url, function(results_json) {
                console.log(url + ' -> ' + JSON.stringify(results_json, null, '\t'));
                // if (results_json && results_json.profile) {
                if (results_json) {
                    self.controller.bids.displayResults(results_json);
                }
                else {
                    self.controller.bids.displayNoResultsHtml('<i>no bids found</i>');
                }
            });
            return null;
         };
        self.addBid = function(listing_id, profile_id, bid_amt, bid_pct, bid_type, bid_rate) {
        };
        self.deleteBid = function(bid_id) {
        };
        return self;
    };

    var Backend = function() {
        var self = {};
        self.controller = null;
        self.backend = null;
        self.setup = function(controller) {
            self.controller = controller;
            //self.backend = new Datastore();
            self.backend = new RestBackend();
            self.backend.setup(controller);
        };
        // profile methods
        self.saveProfile = function(profile) {
            return self.backend.saveProfile(profile);
        };
        self.getProfile = function(profile_id) {
            return self.backend.getProfile(profile_id);
        };
        self.profileForUsername = function(username) {
            return self.backend.profileForUsername(username);
        };
        self.activateProfile = function(profile_id) {
            return self.backend.activateProfile(profile_id);
        };
        self.deactivateProfile = function(profile_id) {
            return self.backend.deactivateProfile(profile_id);
        };
        // listing methods
        self.searchListings = function(searchType, keywords, profile_id, start_index, max_results) {
            return self.backend.searchListings(searchType, keywords, profile_id, start_index, max_results);
        };
        self.getListing = function(listing_id) {
            return self.backend.getListing(listing_id);
        };
        self.saveListing = function(listing) {
            return self.backend.saveListing(listing);
        };
        self.upvoteListing = function(listing_id, callback) {
            return self.backend.upvoteListing(listing_id, callback);
        };
        self.withdrawListing = function(listing_id, callback) {
            return self.backend.withdrawListing(listing_id, callback);
        };
        // comment methods
        self.commentsForListing = function(listing_id) {
            return self.backend.commentsForListing(listing_id);
        };
        self.commentsForProfile = function(profile_id) {
            return self.backend.commentsForProfile(profile_id);
        };
        self.addComment = function(listing_id, profile_id, commentText) {
            return self.backend.addComment(listing_id, profile_id, commentText);
        };
        self.deleteComment = function(comment_id) {
            return self.backend.deleteComment(comment_id);
        };
        // bid methods
        self.bidsForListing = function(listing_id) {
            return self.backend.bidsForListing(listing_id);
        };
        self.bidsForProfile = function(profile_id) {
            return self.backend.bidsForProfile(profile_id);
        };
        self.addBid = function(listing_id, profile_id, bid_amt, bid_pct, bid_type, bid_rate) {
            return self.backend.addBid(listing_id, profile_id, bid_amt, bid_pct, bid_type, bid_rate);
        };
        self.deleteBid = function(bid_id) {
            return self.backend.deleteBid(bid_id);
        };
        return self;
    };

    var Controller = function() {
        var self = {};
        self.managed = {};
        self.actionPages = {};
        self.defaultPage = 'search';
        self.setup = function() {
        };
        self.addManaged = function(name, obj) {
            self.managed[name] = obj;
            self[name] = obj; /* shortcut */
        };
        self.getManaged = function(name) {
            return self.managed[name];
        };
        self.setupManaged = function() {
            for (var i in self.managed) {
                self.managed[i].setup(self);
            }
            controller.loadActionPages();
        };
        self.execute = function(args) {
            if (!args) {
                args = { page: 'search' };
            }
            var page = args['page'];
            if (!page) {
                page = self.defaultPage;
            }
            if (page in self.actionPages) {
                page = self.actionPages[page](args);
            }
            self.displayPage(page);
        };
        self.displayPage = function(page) {
            $('.page').filter(':visible').hide(); // hide all
            var pageSel = '#' + page + 'page';
            $(pageSel).show();
        };
        self.loadActionPages = function() {
            self.actionPages = {
                login: self.user.login,
                logout: self.user.logout,
                search: self.search.execute,
                listing: self.listing.execute,
                comments: self.comments.execute,
                bids: self.bids.execute,
                profile: self.profile.execute
            };
        };
        return self;
    };

    var controller = new Controller();
    window.controller = controller;
    controller.setup();
    controller.addManaged('util', new Util());
    controller.addManaged('backend', new Backend());
    controller.addManaged('user', new User());
    controller.addManaged('uploader', new Uploader());
    controller.addManaged('header', new Header());
    controller.addManaged('search', new Search());
    controller.addManaged('profile', new Profile());
    controller.addManaged('listing', new Listing());
    controller.addManaged('comments', new Comments());
    controller.addManaged('bids', new Bids());
    controller.setupManaged();
    controller.execute();

});
</script>

<style type="text/css">
/* reset all defaults */

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
  margin: 0;
  padding: 0;
  border: 0;
  outline: 0;
  font-weight: inherit;
  font-style: inherit;
  font-size: 100%;
  font-family: inherit;
  vertical-align: baseline;
}
ol, ul {
  list-style: none;
}
table {
  border-collapse: separate;
  border-spacing: 0;
  vertical-align: middle;
}
caption, th, td {
  text-align: left;
  font-weight: normal;
  vertical-align: middle;
}
q, blockquote {
  quotes: "" "";
}
q:before, q:after, blockquote:before, blockquote:after {
  content: "";
}
a img {
  border: none;
}
html, body {
  width: 100%;
  height: 100%;
/*  overflow: hidden; */
  min-height: 100%;
}
body {
  line-height: 1;
  color: black;
  background: white;
  font-family: sans-serif;
}
a,
a:hover,
a:focus,
a:active 
{
text-decoration: none;
}

/* startupbidder styles */
.gradient-bg {
    background: #eeeeee;
    background: -moz-linear-gradient(top,#ffffff,#dddddd);
    background: -o-linear-gradient(#ffffff,#dddddd);
    background: -webkit-linear-gradient(#fffff,#dddddd);
    background: -webkit-gradient(linear,left top,right bottom,from(#ffffff),to(#dddddd));
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#dddddd');
}
.site {
    position: absolute;
    width: 100%;
}
.link {
    color: blue;
}
.link:hover {
    text-decoration: underline;
    cursor: pointer;
}
.attention {
    color: red;
    margin-left: 5px;
}
.confirmed {
    color: green;
    margin-left: 5px;
}
.header {
    font-size: 12px;
    position: absolute;
    width: 100%;
    height: 40px;
    border-bottom: 2px solid black;
}
.content {
    position: absolute;
    width: 100%;
    top: 40px;
}
.header-title {
    position: absolute;
    top: 3px;
    height: 20px;
    left: 100px;
    font-weight: bold;
    font-size: 16px;
}
.header-menu {
    position: absolute;
    left: 100px;
    right: 0px;
}
.header-menu-name {
    position: absolute;
    height: 15px;
    right: 55px;
    top: 5px;
    text-align: right;
}
.header-menu-command {
    font-size: 12px;
    position: absolute;
    height: 15px;
    right: 5px;
    top: 5px;
    text-align: right;
}
.header-menu-bar {
    position: absolute;
    top: 26px;
    left: 0px;
    text-align: left;
}
.content-search {
    margin-top: 2px;
    margin-left: 2px;
}
.content-header {
    margin-top: 5px;
    margin-left: 5px;
    font-size: 18px;
}
.content-header-title-small {
    font-size: 14px;
}
.content-comment {
    margin-top: 5px;
    margin-left: 5px;
    font-size: 14px;
}
.content-comment-textarea {
    font-family: sans-serif;
}
.content-comment-label {
    margin-left: 4px;
    margin-bottom: 2px;
    font-size: 12px;
}
.content-results {
    margin-top: 5px;
    margin-left: 5px;
}
.content-results-list {
}
.content-results-list-item {
    float:left;
    width: 100%;
    padding: 5px;
}
.content-results-list-item {
    background: #eeeeee;
    background: -moz-linear-gradient(top,#ffffff,#dddddd);
    background: -o-linear-gradient(#ffffff,#dddddd);
    background: -webkit-linear-gradient(#ffffff,#dddddd);
/*    background: -webkit-gradient(linear,left top,right bottom,from(#ffffff),to(#dddddd)); */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#dddddd');
}
.content-results-list-item-odd {
    background: #eeeeff;
    background: -moz-linear-gradient(top,#ffffff,#dddddd);
    background: -o-linear-gradient(#ffffff,#dddddd);
    background: -webkit-linear-gradient(#ffffff,#dddddd);
/*    background: -webkit-gradient(linear,left top,right bottom,from(#ffffff),to(#dddddd)); */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#dddddd');
}
.content-results-list-item-even {
    background: #ffffff;
    background: -moz-linear-gradient(top,#ffffff,#dddddd);
    background: -o-linear-gradient(#ffffff,#dddddd);
    background: -webkit-linear-gradient(#ffffff,#dddddd);
/*    background: -webkit-gradient(linear,left top,right bottom,from(#ffffff),to(#dddddd)); */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#dddddd');
}
.content-results-list-item-num {
    float: left;
    width: 20px;
}
.content-results-list-item-upvote {
    float: left;
    width: 10px;
    height: 10px;
    background-repeat: no-repeat;
    background-image: url(data:image/gif;base64,R0lGODlhCgAKALMJANPT06enp/b29r+/v52dnfn5+bq6usLCwpqamv///wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAAAKAAoAAAQcMMlJq712GIzQDV1QFV0nUETZTYDaAdIhz3ISAQA7);
    margin-right: 5px;
}
.content-results-list-item-upvote:hover {
    cursor: pointer;
    background-color: #aaffaa;
}
.content-results-list-item-upvote-filler {
    float: left;
    width: 20px;
}
.content-results-list-item-clear {
    clear: both;
    height: 0px;
}
.content-results-list-item-title {
    float: left;
}
.content-results-list-item-profile {
    float: left;
    margin-left: 5px;
    font-size: 12px;
    line-height: 18px;
}
.content-results-list-item-detail {
    float: left;
    margin-top: 5px;
    margin-left: 35px;
    font-size: 12px;
    margin-bottom: 5px;
}
.content-results-footer {
    float: left;
    font-size: 12px;
}
.content-form {
    margin-left: 5px;
    margin-top: 5px;
}
.content-form-line, .content-form-line-emphasized, .content-form-mainline, .content-form-linkline {
    float: left;
    margin-left: 5px;
    text-align: left;
    font-size: 14px;
    line-height: 26px;
}
.content-form-multiline {
    float: left;
    margin-left: 5px;
    text-align: left;
    font-size: 14px;
}
.content-form-line-emphasized {
    font-weight: bold;
}
.content-form-mainline {
    font-weight: bold;
}
.content-form-linkline {
    font-size: 12px;
    line-height: 20px;
}
.content-form-inputline, .content-form-maininputline {
    float: left;
    margin-left: 5px;
    text-align: left;
    font-size: 12px;
}
.content-form-checkbox {
    line-height: 30px;
}
.content-form-maininputline {
    font-weight: bold;
}
.content-form-inputline-textarea {
    font-family: sans-serif;
}
.content-form-label {
    float: left;
    text-align: right;
    width: 100px;
    font-size: 14px;
    line-height: 24px;
}
.content-form-value {
    float: left;
    text-align: left;
    font-size: 14px;
    height: 25px;
    margin-left: 5px;
    margin-top: 5px;
}
.content-form-input {
    float: left;
    text-align: left;
    font-size: 12px;
    height: 30px;
}
.content-form-clear {
    clear: both;
    height: 0px;
}
.listing-download-button {
    margin-top: 10px;
    width: 150px;
}
.header-logo {
    position: absolute;
    top: 3px;
    height: 37px;
    left: 2px;
    width: 98px;
}
.header-logo {
/*
width: 90px;
height: 36px;
*/
background-repeat: no-repeat;
background-image: url(data:image/png;base64,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);
}
.content-form-login-facebook {
    width: 48px;
    height: 48px;
    background-position: 0px 0px;
}
.content-form-login-twitter {
    width: 48px;
    height: 48px;
    background-position: -48px 0px;
}
.content-form-login-google {
    width: 48px;
    height: 48px;
    background-position: -96px 0px;
}
.content-form-login-yahoo {
    width: 48px;
    height: 48px;
    background-position: -144px 0px;
}
.search-cursor {
    display: none;
}
.content-form-login {
/*
width: 192px;
height: 48px;
*/
float: left;
background-repeat: no-repeat;
background-image: url(data:image/png;base64,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);
}

/* null display to start with */
.page {
    display: none;
}
.header-menu-name-username {
    display: none;
}
.header-menu-command-logout {
    display: none;
}
.header-menu-bar-submit-spacer {
    display: none;
}
.header-menu-bar-submit {
    display: none;
}
</style>

</head>

<body class="gradient-bg">

<div class="site">
    <div class="header">
        <div id="header-logo" class="header-logo"></div>
        <div class="header-title">
            <span class="link" id="header-title-link">startupbidder</span>
        </div>
        <div class="header-menu">
            <div class="header-menu-name">
                <span class="header-menu-name-username link" id="header-menu-name-username"></span>
            </div>
            <div class="header-menu-command">
                <span class="header-menu-command-login link" id="header-menu-command-login">(login)</span>
                <span class="header-menu-command-logout link" id="header-menu-command-logout">(logout)</span>
            </div>
            <div class="header-menu-bar">
                <span class="link" id="header-menu-bar-top">top</span>
                <span> | </span>
                <!--
                <span class="link" id="header-menu-bar-valuation">valuation</span>
                <span> | </span>
                <span class="link" id="header-menu-bar-active">active</span>
                <span> | </span>
                <span class="link" id="header-menu-bar-popular">popular</span>
                <span> | </span>
                <span class="link" id="header-menu-bar-discussed">discussed</span>
                <span> | </span>
                -->
                <span class="link" id="header-menu-bar-latest">new</span>
                <span> | </span>
                <span class="link" id="header-menu-bar-closing-soon">closing soon</span>
                <span> | </span>
                <span class="link" id="header-menu-bar-faq">faq</span>
                <span class="header-menu-bar-submit-spacer" id="header-menu-bar-submit-spacer"> | </span>
                <span class="header-menu-bar-submit link" id="header-menu-bar-submit">submit</span>
            </div>
        </div>
    </div>

    <div id="searchpage" class="content page">
        <div class="content-search">
            <input id="content-search-keywords" name="keywords" type="text" size="30"/>
            <button id="content-search-submit">search</button>
        </div>
        <div class="content-results">
            <div id="search-content-results-list" class="content-results-list"></div>
            <div class="content-results-footer">
                <span class="link search-cursor" id="search-prev-results">prev</span>
                <span class="link search-cursor" id="search-next-results">next</span>
            </div>
            <div class="content-results-list-item-clear"></div>
        </div>
    </div>

    <div id="commentspage" class="content page">
        <div class="content-header">
            <div class="content-results-list" id="comments-listing-snippet"></div>
        </div>
        <form action="#" method="post">
        <div class="content-comment" id="comment-loggedin-add">
                <div class="content-comment-label">your comment:</div>
                <input name="page" type="hidden" value="comments"/>
                <textarea class="content-comment-textarea" id="comment-textarea" name="comment" cols="55" rows="6" wrap="soft"></textarea>
                <br/>
                <button id="comment-save-button">Save</button><em><span class="attention" id="comment-save-message"></span></em>
        </div>
        </form>
        <div class="content-comment" id="comment-not-loggedin-msg">
            <em>You must be logged in to comment</em>
        </div>
        <div class="content-results">
            <div class="content-results-list" id="comments-content-results-list"></div>
        </div>
    </div>
    
    <div id="profilepage" class="content page">
        <div class="content-form" id="profile-form-editable">
            <form action="#" method="post">
            <input name="page" type="hidden" value="profile"/>
            <input id="profile-edit-profile-id" name="profile-id" type="hidden" value=""/>

            <div class="content-form-line-emphasized"><span id="profile-edit-username">johnarleyburns32</span></div>
            <div class="content-form-clear"></div>
            <div class="content-form-inputline"><input id="profile-edit-name" name="name" type="text" size="40" value="John Arley Burns"/></div>
            <div class="content-form-clear"></div>
            <div class="content-form-line">is the </div>
            <div class="content-form-inputline"><input id="profile-edit-title" name="title" type="text" size="20" value="CEO"/></div>
            <div class="content-form-clear"></div>
            <div class="content-form-line">at</div>
            <div class="content-form-inputline"><input id="profile-edit-organization" name="organization" type="text" size="35" value="Steinwasser, Inc."/></div>
            <div class="content-form-clear"></div>

            <div class="content-form-line">Reachable on email at</div>
            <div class="content-form-clear"></div>
            <div class="content-form-inputline"><input id="profile-edit-email" name="email" type="text" size="40" value="johnarleyburns@gmail.com"/></div>
            <div class="content-form-clear"></div>

            <div class="content-form-label">on facebook at</div>
            <div class="content-form-input"><input id="profile-edit-facebook" name="facebook" type="text" size="20" value="johnarleyburns"/></div>
            <div class="content-form-clear"></div>

            <div class="content-form-label">on twitter at</div>
            <div class="content-form-input"><input id="profile-edit-twitter" name="twitter" type="text" size="20" value="jarleyburns"/></div>
            <div class="content-form-clear"></div>

            <div class="content-form-label">on linkedin at</div>
            <div class="content-form-input"><input id="profile-edit-linkedin" name="linkedin" type="text" size="20" value=""/></div>
            <div class="content-form-clear"></div>

            <div class="content-form-line">Investor</div>
            <div class="content-form-inputline content-form-checkbox"><input id="profile-edit-investor" name="investor" type="checkbox" checked="checked"/></div>
            <div class="content-form-clear"></div>
            
            <div class="content-form-clear"></div>
            <div class="content-form-line">Member since <span id="profile-edit-joined-date">15 June 2011</span></div>
            <div class="content-form-clear"></div>

            <div class="content-form-line">Linked via OpenID <span id="profile-edit-open-id">johnarleyburns32.google.com</span></div>
            <div class="content-form-clear"></div>

            <div class="content-form-inputline"><button id="profile-save-link">Save</button><em><span class="attention" id="profile-save-message"></span></em></div>
            <div class="content-form-clear"></div>

            <div class="content-form-linkline">
                <span id="profile-edit-num-listings-link" class="link"><span id="profile-edit-num-listings" class="link">3</span> listings</span>  |
                <span id="profile-edit-num-bids-link" class="link"><span id="profile-edit-num-bids" class="link">7</span> bids</span>  |
                <span id="profile-edit-num-comments-link" class="link"><span id="profile-edit-num-comments" class="link">12</span> comments</span>
            </div>
            <div class="content-form-clear"></div>

            <div class="content-form-linkline">
                <span class="link" id="profile-deactivate-link">(deactivate profile)</span>
                <span class="link" id="profile-activate-link">(activate profile)</span>
            </div>
            <div class="content-form-clear"></div>
            </form>
        </div>
        <div class="content-form" id="profile-form-readonly">
            <div class="content-form-line-emphasized"><span id="profile-username">johnarleyburns32</span></div>
            <div class="content-form-clear"></div>
            <div class="content-form-line"><span id="profile-name">John Arley Burns</span></div>
            <div class="content-form-clear"></div>
            <div class="content-form-line">is a <span id="profile-title">CEO</span></div>
            <div class="content-form-line">at <span id="profile-organization">Steinwasser, Inc.</span></div>
            <div class="content-form-clear"></div>

            <div class="content-form-line">Reachable on email at <a id="profile-email-href" href=""><span id="profile-email">johnarleyburns@gmail.com</span></a></div>
            <div class="content-form-clear"></div>

            <div class="content-form-line">on facebook at <a id="profile-facebook-href" href=""><span id="profile-facebook">johnarleyburns59</span></a></div>
            <div class="content-form-clear"></div>
            <div class="content-form-line">on twitter at <a id="profile-twitter-href" href=""><span id="profile-twitter">johnarleyburns21</span></a></div>
            <div class="content-form-clear"></div>
            <div class="content-form-line">on linkedin at <a id="profile-linkedin-href" href=""><span id="profile-linkedin">johnarleyburns63</span></a></div>
            <div class="content-form-clear"></div>

            <div class="content-form-line">Investor</div>
            <div class="content-form-inputline content-form-checkbox"><input id="profile-investor" name="investor" type="checkbox" disabled="disabled"/></div>
            <div class="content-form-clear"></div>
            
            <div class="content-form-clear"></div>
            <div class="content-form-line">Member since <span id="profile-joined-date">15 June 2011</span></div>
            <div class="content-form-clear"></div>
<!--
            <div class="content-form-line">Linked via OpenID <span id="profile-open-id">johnarleyburns32.google.com</span></div>
            <div class="content-form-clear"></div>
            -->
            <div class="content-form-linkline">
                <span id="profile-num-listings-link" class="link"><span id="profile-num-listings" class="link">3</span> listings</span>  |
                <span id="profile-num-bids-link" class="link"><span id="profile-num-bids" class="link">7</span> bids</span>  |
                <span id="profile-num-comments-link" class="link"><span id="profile-num-comments" class="link">12</span> comments</span>
            </div>
            <div class="content-form-clear"></div>
        </div>
    </div>
    
    <div id="faqpage" class="content page">
        <div class="content-header">
            <div class="content-header-title">
                FAQ - Frequently Asked Questions
            </div>
        </div>
        <div class="content-results">
            <div class="content-results-list">
                <div class="content-results-list-item content-results-list-item-odd">
                    <div class="content-results-list-item-num">1.</div>
                    <div class="content-results-list-item-upvote-filler"></div>
                    <div class="content-results-list-item-title">
                        What is Startupbidder?
                    </div>
                    <div class="content-results-list-item-clear"></div>
                    <div class="content-results-list-item-detail">
                        A crowdsourced startup company information site. On it you can place your business plan,
                        comment on business plans, up or down vote a business plan, and if you're an investor,
                        bid for a stake in the company!
                    </div>
                </div>
                <div class="content-results-list-item-clear"></div>
                <div class="content-results-list-item content-results-list-item-even">
                    <div class="content-results-list-item-num">2.</div>
                    <div class="content-results-list-item-upvote-filler"></div>
                    <div class="content-results-list-item-title">
                        Who runs Startupbidder?
                    </div>
                    <div class="content-results-list-item-clear"></div>
                    <div class="content-results-list-item-detail">
                        Two guys who wanted to bring more visibility to the otherwise opaque world of
                        startup business plan valuation.  That, and they were bored.
                    </div>
                </div>
                <div class="content-results-list-item-clear"></div>
                <div class="content-results-list-item content-results-list-item-odd">
                    <div class="content-results-list-item-num">3.</div>
                    <div class="content-results-list-item-upvote-filler"></div>
                    <div class="content-results-list-item-title">
                        How can we reach you?
                    </div>
                    <div class="content-results-list-item-clear"></div>
                    <div class="content-results-list-item-detail">
                        Try admin@startupbidder.com, or +49 162.179.2450 by phone.
                    </div>
                </div>
                <div class="content-results-list-item-clear"></div>
                <div class="content-results-list-item content-results-list-item-even">
                    <div class="content-results-list-item-num">4.</div>
                    <div class="content-results-list-item-upvote-filler"></div>
                    <div class="content-results-list-item-title">
                        What is the algorithm you use to rank stories?
                    </div>
                    <div class="content-results-list-item-clear"></div>
                    <div class="content-results-list-item-detail">
<pre>
Used by search for the 'top' query:

p = votes (points) from users.
b = number of bids
c = number of comments
v = median valuation (normalized / $100,000)
t = time since submission in days
s = score

putting it together:

s = (p + b + c + v) / (t + 2)^1.5

Reference:
</pre>
<a href="http://www.seomoz.org/blog/reddit-stumbleupon-delicious-and-hacker-news-algorithms-exposed">seomoz.org</a>
                    </div>
                </div>
                <div class="content-results-list-item-clear"></div>
                <div class="content-results-list-item content-results-list-item-odd">
                    <div class="content-results-list-item-num">4.</div>
                    <div class="content-results-list-item-upvote-filler"></div>
                    <div class="content-results-list-item-title">
                        What happens on the listing closing date?
                    </div>
                    <div class="content-results-list-item-clear"></div>
                    <div class="content-results-list-item-detail">
                        The listing still accepts bids up until midnight UTC on the closing date.  At that time,
                        the listing status is moved to closed and no further bids are accepted.  The lister
                        and all users who made bids are then notified via email of the bid closing.  It is then
                        the responsibility of the lister to follow up with one or more of the bidding parties
                        for a formal legal funding agreement.
                    </div>
                </div>
                <div class="content-results-list-item-clear"></div>
                 <div class="content-results-list-item-clear"></div>
                <div class="content-results-list-item content-results-list-item-odd">
                    <div class="content-results-list-item-num">5.</div>
                    <div class="content-results-list-item-upvote-filler"></div>
                    <div class="content-results-list-item-title">
                        Are you offering shares in these companies for sale?
                    </div>
                    <div class="content-results-list-item-clear"></div>
                    <div class="content-results-list-item-detail">
                        No.  Startupbidder is an informational site linking startup entpreneurs with investors.
                        We are not offering shares for sale or promoting any shares via this site.
                        All investments must be concluded between the parties themselves with proper legal representation.
                    </div>
                </div>
                <div class="content-results-list-item-clear"></div>
             </div>
        </div>
    </div>
    
    <div id="listingpage" class="content page">
        <div class="content-header">
            <div class="content-results-list" id="listing-snippet"></div>
        </div>
        <div class="content-form-line" id="listing-form-message"></div>
        <div class="content-form-clear"></div>
        <div class="content-form" id="listing-form-editable">
                
                <form action="#" method="post" enctype="multipart/form-data">
                <input name="page" type="hidden" value="listing"/>
                <input id="listing-edit-listing-id" name="listing-id" type="hidden" value=""/>
                <input id="listing-edit-median-valuation" name="median-valuation" type="hidden" value=""/>
                <input id="listing-edit-num-votes" name="num-votes" type="hidden" value=""/>
                <input id="listing-edit-num-bids" name="num-bids" type="hidden" value=""/>
                <input id="listing-edit-num-comments" name="num-comments" type="hidden" value=""/>
                <input id="listing-edit-profile-id" name="profile-id" type="hidden" value=""/>
                <input id="listing-edit-profile-username" name="profile-username" type="hidden" value=""/>
                <input id="listing-edit-listing-date" name="listing-date" type="hidden" value=""/>
                <input id="listing-edit-status" name="listing-id" type="hidden" value=""/>

                <div class="content-form-line">Title is </div>
                <div class="content-form-maininputline"><input id="listing-edit-title" name="title" type="text" size="40" value="type listing title here"/></div>
                <div class="content-form-clear"></div>

                <div class="content-form-line">Closing date </div>
                <div class="content-form-inputline"><input id="listing-edit-closing-date" name="closing_date" type="text" size="10" maxlength="10" value="YYYY-MM-DD"/></div>
                <div class="content-form-clear"></div>

                <div class="content-form-line">Suggested bid of </div>
                <div class="content-form-inputline">$<input id="listing-edit-suggested-amt" name="suggested_bid_amt" type="text" size="9" maxlength="9" value="30,000"/></div>
                <div class="content-form-line">for</div>
                <div class="content-form-inputline"><input id="listing-edit-suggested-pct" name="suggested_bid_pct" type="text" size="2" maxlength="2" value="10"/>%</div>
                <div class="content-form-line"> equity</div>
                <div class="content-form-clear"></div>

                <div class="content-form-line">Suggested valuation is $<span id="listing-edit-suggested-val"></span></div>
                <div class="content-form-clear"></div>

                <div class="content-form-line">Executive Summary</div>
                <div class="content-form-clear"></div>
                <div class="content-form-inputline">
                    <textarea class="content-form-inputline-textarea" id="listing-edit-summary" name="executive_summary" rows="10" cols="50" wrap="soft">
MisLead is a revolution in social networking.  Previously, social networking has been for people with friends, those outgoing on the internet, those who don't have trouble communicating online.  There is an untapped market in those who not only have difficulty making social connections, but frequently dislike social situations and social crowds.  With MisLead, you are only allowed a maximum of five friends at any one time.  However, you are more intimately connected with them, including real-time location updates, frequent SMS on activities, and heavy linking into any goings-on for connected individuals in a plethora of other networks.
                    </textarea>
                </div>
                <div class="content-form-clear"></div>

                <div class="content-form-line"><span class="link" id="listing-edit-business-plan-link">view business plan</span></div>
                <div class="content-form-clear"></div>
                <div class="content-form-line"><span class="link" id="listing-edit-presentationn-link">view presentation</span></div>
                <div class="content-form-clear"></div>

                <div class="content-form-label">Business plan</div>
                <div class="content-form-input"><input id="listing-upload-business-plan" name="business-plan" type="file"/></div> <!-- size="40" -->
                <div class="content-form-clear"></div>

                <div class="content-form-label">Presentation</div>
                <div class="content-form-input"><input id="listing-upload-presentation" name="presentation" type="file"/></div> <!-- size="40" -->
                <div class="content-form-clear"></div>
                
                <div class="content-form-inputline"><button id="listing-save-link">Save</button><span class="attention" id="listing-save-message"></span></div>
                <div class="content-form-clear"></div>

                <div class="content-form-linkline"><span class="link" id="listing-withdraw-link">(withdraw listing)</span></div>
                <div class="content-form-clear"></div>

                </form>
        </div>
        <div class="content-form" id="listing-form-readonly">
                <div class="content-form-line">
                    Suggested bid of $<span id="listing-readonly-suggested-amt"></span>
                    for <span id="listing-readonly-suggested-pct"></span>% equity
                </div>
                <div class="content-form-clear"></div>
                <div class="content-form-line">Suggested valuation is $<span id="listing-readonly-suggested-val"></span></div>
                <div class="content-form-clear"></div>

                <div class="content-form-line-emphasized">Executive Summary</div>
                <div class="content-form-clear"></div>
                <div class="content-form-multiline" id="listing-readonly-summary">
MisLead is a revolution in social networking.  Previously, social networking has been for people with friends, those outgoing on the internet, those who don't have trouble communicating online.  There is an untapped market in those who not only have difficulty making social connections, but frequently dislike social situations and social crowds.  With MisLead, you are only allowed a maximum of five friends at any one time.  However, you are more intimately connected with them, including real-time location updates, frequent SMS on activities, and heavy linking into any goings-on for connected individuals in a plethora of other networks.
                </div>
                <div class="content-form-clear"></div>

                <div class="content-form-line"><span class="link" id="listing-readonly-business-plan-link">view business plan</span></div>
                <div class="content-form-clear"></div>

                <div class="content-form-line"><span class="link" id="listing-readonly-presentation-link">view presentation</span></div>
                <div class="content-form-clear"></div>
         </div>
    </div>
    
    <div id="bidspage" class="content page">
        <div class="content-header">
            <div class="content-results-list" id="bids-listing-snippet"></div>
        </div>
        <div class="content-form" id="bids-form-loggedin">
            <form action="#" method="post" enctype="multipart/form-data">
                <input name="page" type="hidden" value="listing"/>
                <div class="content-form-line">Place bid of $</div>
                <div class="content-form-inputline"><input id="bid-amt" name="bid_amt" type="text" size="9" maxlength="9" value="30,000"/></div>
                <div class="content-form-line">for</div>
                <div class="content-form-inputline"><input id="bid-pct" name="bid_pct" type="text" size="2" maxlength="2" value="10"/></div>
                <div class="content-form-line">% equity (fully diluted)</div>
                <div class="content-form-clear"></div>

                <div class="content-form-line">As</div>
                <div class="content-form-line">
                    <select id="bid-type" name="bid_type">
                        <option value="common">Common Stock</option>
                        <option value="preferred">Preferred Stock</option>
                        <option value="note">Convertible Note</option>
                    </select>
                </div>
                <div class="content-form-line">@</div>
                <div class="content-form-inputline"><input id="bid-rate" name="bid_rate" type="text" size="2" maxlength="2" value="10" disabled/></div>
                <div class="content-form-line">% interest</div>
                <div class="content-form-clear"></div>

                <div class="content-form-line">Your calculated valuation is $<span id="bid-calculated-valuation">1.35m</span></div>
                <div class="content-form-clear"></div>

                <div class="content-form-line">
                    <button id="bid-save-button">Place Bid</button> <em><span class="attention" id="bid-save-message"></span></em>
                </div>
                <div class="content-form-clear"></div>
            </form>
        </div>
        <div class="content-form" id="bids-form-not-loggedin">
            <em>You must be logged in to bid.</em>
        </div>
        <div class="content-form">
            <div class="content-form-line-emphasized">Bid history:</div>
            <div class="content-form-clear"></div>
        </div>
        <div class="content-results">
            <div class="content-results-list" id="bids-content-results-list"></div>
        </div>
    </div>
  
    <div id="loginpage" class="content page">
        <div class="content-header">
            <div class="content-header-title">
                Sign in via:
            </div>
        </div>
        <div class="content-form">
            <div class="content-form-line">
                <a href="#"><div class="content-form-login content-form-login-google"></div>Google</a>
            </div>
            <div class="content-form-clear"></div>
            <div class="content-form-line">
                <a href="#"><div class="content-form-login content-form-login-yahoo"></div>Yahoo</a>
            </div>
        </div>
    </div>
    
</div>


</body>

</html>
